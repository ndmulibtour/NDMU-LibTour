{"version":3,"file":"static/chunks/5133.54364504a06a9fcc.js","mappings":"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","sources":["webpack://_N_E/./containers/Home/components/Map/DisplayPanel.tsx","webpack://_N_E/./containers/Home/hook/useEventMap.tsx","webpack://_N_E/<anon>"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { memo, useRef, useCallback } from 'react';\nimport { I_Scene } from '@containers/Home/types';\nimport { DEFAULT_VALUE_MAP_CONFIG } from '@containers/Home/constants';\nimport dynamic from 'next/dynamic';\nimport { useTourEventState } from '@containers/Home/global/TourStats';\nimport { useEventMap } from '@containers/Home/hook/useEventMap';\nimport { useSelector } from 'react-redux';\nimport {\n  selectLanguageProject,\n  selectThemeConfigGlobal,\n} from '@containers/Home/selectors';\nimport { Tooltip } from 'antd';\nimport { ActionMapWrapper, MapPanelWrapper } from './styled';\nimport GoogleMap, { Type_RefFuncGoogleMap } from './GoogleMap';\nimport { isServer } from '@utils/helper';\n\nconst Popup = dynamic(() => import('./Popup'));\n\ninterface Props {\n  onChangeScene: (scene: I_Scene) => void;\n}\n\nconst MapPanel = memo(({ onChangeScene }: Props) => {\n  const LANGUAGES = isServer ? {} : window.languages || {};\n\n  const googleMapRef = useRef<Type_RefFuncGoogleMap>(null!);\n  const languageProject = useSelector(selectLanguageProject);\n  const themeConfig = useSelector(selectThemeConfigGlobal);\n  const [tourEventStats] = useTourEventState('state');\n\n  const {\n    mapData,\n    configMap,\n    visiblePopup,\n    sceneSelected,\n    markerSelected,\n    configDisplayPanel,\n    onCloseMap,\n    onOpenPopup,\n    onClosePopup,\n  } = useEventMap();\n\n  const onCoverAllMarker = useCallback(() => {\n    googleMapRef.current?.onFitBounds();\n  }, []);\n\n  const onCenterToMarkerActive = useCallback(() => {\n    googleMapRef.current?.onPanToMarker(markerSelected);\n  }, [markerSelected]);\n\n  return !visiblePopup ? (\n    <MapPanelWrapper\n      bgColor={configMap?.bgColor || DEFAULT_VALUE_MAP_CONFIG.bgColor || '#000'}\n      position={configDisplayPanel?.position || 'left'}\n      className={`${tourEventStats.isVisibleMap ? '' : 'hide'} ${\n        themeConfig?.selected === 'basekrpano'\n          ? 'basekrpano'\n          : themeConfig?.selected === 'custom1'\n          ? 'custom1'\n          : themeConfig?.selected === 'wall'\n          ? 'wall'\n          : 'default'\n      }`}\n    >\n      <div className=\"main\">\n        <GoogleMap\n          ref={googleMapRef}\n          mapData={mapData}\n          sceneSelected={sceneSelected}\n          markerSelected={markerSelected}\n          configMap={configMap}\n          onChangeScene={onChangeScene}\n        />\n      </div>\n\n      <ActionMapWrapper>\n        <div className=\"--left\" />\n        <div className=\"--right\">\n          <Tooltip\n            title={LANGUAGES[languageProject]?.actionMarkerCenter}\n            placement=\"top\"\n          >\n            <div className=\"action--item\" onClick={onCenterToMarkerActive}>\n              <i aria-hidden className=\"far fa-crosshairs\" />\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={LANGUAGES[languageProject]?.actionMarkerCover}\n            placement=\"top\"\n          >\n            <div className=\"action--item\" onClick={onCoverAllMarker}>\n              <i aria-hidden className=\"far fa-ball-pile\" />\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={LANGUAGES[languageProject]?.actionMarkerExpand}\n            placement=\"top\"\n          >\n            <div className=\"action--item\" onClick={onOpenPopup}>\n              <i aria-hidden className=\"far fa-expand\" />\n            </div>\n          </Tooltip>\n          <Tooltip\n            title={LANGUAGES[languageProject]?.actionMarkerClose}\n            placement=\"top\"\n          >\n            <div className=\"action--item\" onClick={onCloseMap}>\n              <i aria-hidden className=\"far fa-times\" />\n            </div>\n          </Tooltip>\n        </div>\n      </ActionMapWrapper>\n    </MapPanelWrapper>\n  ) : (\n    <Popup\n      visible={visiblePopup}\n      markerSelected={markerSelected}\n      mapData={mapData}\n      configMap={configMap}\n      onChangeScene={onChangeScene}\n      onCancel={onClosePopup}\n    />\n  );\n});\n\nexport default MapPanel;\n","import { useCallback, useMemo, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useTourEventState } from '../global/TourStats';\nimport {\n  selectDataMap,\n  selectConfigMap,\n  selectSceneSelected,\n} from '../selectors';\n\n// interface Props {}\n\nexport const useEventMap = () => {\n  const mapData = useSelector(selectDataMap);\n  const configMap = useSelector(selectConfigMap);\n  const sceneSelected = useSelector(selectSceneSelected);\n\n  const [, setTourEventStats] = useTourEventState('state');\n\n  const markerSelected = useMemo(\n    () =>\n      mapData?.markers?.filter(\n        item => item.target_scene_id === sceneSelected?.id,\n      )[0] || undefined,\n    [mapData, sceneSelected?.id],\n  );\n\n  const configDisplayPanel = useMemo(\n    () => (configMap?.map?.type === 'panel' ? configMap?.map : undefined),\n    [configMap?.map],\n  );\n\n  const configDisplayBox = useMemo(\n    () =>\n      configMap?.map?.type === 'box'\n        ? {\n            ...{\n              offsetBottom: 48,\n              offsetLeft: 10,\n              offsetRight: 10,\n              offsetTop: 10,\n            },\n            ...configMap?.map,\n          }\n        : undefined,\n    [configMap?.map],\n  );\n\n  const [visiblePopup, setVisiblePopup] = useState(false);\n\n  const onCloseMap = useCallback(() => {\n    setTourEventStats(prev => ({ ...prev, isVisibleMap: false }));\n  }, [setTourEventStats]);\n\n  const onOpenPopup = useCallback(() => setVisiblePopup(true), []);\n  const onClosePopup = useCallback(() => setVisiblePopup(false), []);\n\n  return useMemo(\n    () => ({\n      visiblePopup,\n      sceneSelected,\n      markerSelected,\n      configMap,\n      configDisplayBox,\n      mapData,\n      configDisplayPanel,\n      onCloseMap,\n      onClosePopup,\n      onOpenPopup,\n    }),\n    [\n      visiblePopup,\n      sceneSelected,\n      markerSelected,\n      configMap,\n      configDisplayBox,\n      mapData,\n      configDisplayPanel,\n      onCloseMap,\n      onClosePopup,\n      onOpenPopup,\n    ],\n  );\n};\n"],"names":["Popup","dynamic","__webpack_require__","e","then","bind","MapPanel","memo","param","LANGUAGES","onChangeScene","isServer","window","languages","googleMapRef","useRef","languageProject","useSelector","selectLanguageProject","themeConfig","selectThemeConfigGlobal","tourEventStats","useTourEventState","useEventMap","mapData","configMap","visiblePopup","sceneSelected","markerSelected","configDisplayPanel","onCloseMap","onOpenPopup","onClosePopup","onCoverAllMarker","useCallback","current","onFitBounds","onCenterToMarkerActive","onPanToMarker","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","visible","onCancel","jsxs","MapPanelWrapper","bgColor","DEFAULT_VALUE_MAP_CONFIG","position","className","isVisibleMap","concat","selected","div","GoogleMap","ref","ActionMapWrapper","Tooltip","title","actionMarkerCenter","placement","onClick","i","aria-hidden","actionMarkerCover","actionMarkerExpand","actionMarkerClose","__webpack_exports__","selectDataMap","selectConfigMap","selectSceneSelected","setTourEventStats","useMemo","markers","filter","item","target_scene_id","id","undefined","map","type","configDisplayBox","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_5__","_","offsetBottom","offsetLeft","offsetRight","offsetTop","useState","setVisiblePopup","prev","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__"],"sourceRoot":""}