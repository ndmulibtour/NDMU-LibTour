"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9295],{29295:function(e,n,t){t.r(n);var o=t(91309),i=t(85893),l=t(67294),a=t(97616),r=t(5152),c=t.n(r),s=t(58673),u=t(98075),d=t(25617),f=t(61935),v=t(94055),p=t(4259),m=t(82857),h=t(15924),k=c()(function(){return t.e(2851).then(t.bind(t,12851))},{loadableGenerated:{webpack:function(){return[12851]}}}),b=(0,l.memo)(function(e){var n,t,r,c,b=e.onChangeScene,g=h.sk?{}:window.languages||{},C=(0,l.useRef)({width:0,height:0}),x=(0,l.useRef)(null),M=(0,l.useRef)(null),j=(0,d.v9)(f.AA),w=(0,d.v9)(f.g5),y=(0,o._)((0,s.gU)("state"),1)[0],N=(0,u.m)(),S=N.mapData,_=N.configMap,R=N.visiblePopup,P=N.sceneSelected,D=N.markerSelected,E=N.configDisplayBox,B=N.onCloseMap,T=N.onOpenPopup,L=N.onClosePopup,O=(0,l.useCallback)(function(){var e;null===(e=M.current)||void 0===e||e.onFitBounds()},[]),z=(0,l.useCallback)(function(){var e;null===(e=M.current)||void 0===e||e.onPanToMarker(D)},[D]),A=(0,l.useCallback)(function(e){var n=!0,t=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;C.current={width:Math.round(a.contentRect.width),height:Math.round(a.contentRect.height)}}}catch(e){t=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw o}}(C.current.width===p.yy.normal.width-4||C.current.width===p.yy.scale.width-4)&&setTimeout(function(){var e,n;null===(e=M.current)||void 0===e||e.onInvalidateSize(),null===(n=M.current)||void 0===n||n.onPanToMarker(D)},500)},[D]);return(0,l.useEffect)(function(){var e=new ResizeObserver(A);return x.current&&e.observe(x.current),function(){e.disconnect()}},[R]),R?(0,i.jsx)(k,{visible:R,markerSelected:D,mapData:S,configMap:_,onChangeScene:b,onCancel:L}):(0,i.jsxs)(p.Yq,{ref:x,bgColor:(null==_?void 0:_.bgColor)||a.xr.bgColor||"#000",position:(null==E?void 0:E.position)||"bottomRight",offsetTop:(null==E?void 0:E.offsetTop)||10,offsetBottom:(null==E?void 0:E.offsetBottom)||10,offsetRight:(null==E?void 0:E.offsetRight)||10,offsetLeft:(null==E?void 0:E.offsetLeft)||10,className:"".concat(y.isVisibleMap?"":"hide"," ").concat((null==j?void 0:j.selected)==="basekrpano"?"basekrpano":(null==j?void 0:j.selected)==="custom1"?"custom1":(null==j?void 0:j.selected)==="wall"?"wall":"default"),children:[(0,i.jsxs)(p.Nh,{children:[(0,i.jsx)("div",{className:"--left"}),(0,i.jsxs)("div",{className:"--right",children:[(0,i.jsx)(v.default,{title:null===(n=g[w])||void 0===n?void 0:n.actionMarkerCenter,placement:"top",children:(0,i.jsx)("div",{className:"action--item",onClick:z,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-crosshairs"})})}),(0,i.jsx)(v.default,{title:null===(t=g[w])||void 0===t?void 0:t.actionMarkerCover,placement:"top",children:(0,i.jsx)("div",{className:"action--item",onClick:O,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-ball-pile"})})}),(0,i.jsx)(v.default,{title:null===(r=g[w])||void 0===r?void 0:r.actionMarkerExpand,placement:"top",children:(0,i.jsx)("div",{className:"action--item",onClick:T,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-expand"})})}),(0,i.jsx)(v.default,{title:null===(c=g[w])||void 0===c?void 0:c.actionMarkerClose,placement:"top",children:(0,i.jsx)("div",{className:"action--item",onClick:B,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-times"})})})]})]}),(0,i.jsx)(m.Z,{ref:M,mapData:S,sceneSelected:P,markerSelected:D,configMap:_,onChangeScene:b})]})});n.default=b},98075:function(e,n,t){t.d(n,{m:function(){return useEventMap}});var o=t(72253),i=t(14932),l=t(91309),a=t(67294),r=t(25617),c=t(58673),s=t(61935),useEventMap=function(){var e=(0,r.v9)(s.CE),n=(0,r.v9)(s.F7),t=(0,r.v9)(s.Y2),u=(0,l._)((0,c.gU)("state"),2)[1],d=(0,a.useMemo)(function(){var n;return(null==e?void 0:null===(n=e.markers)||void 0===n?void 0:n.filter(function(e){return e.target_scene_id===(null==t?void 0:t.id)})[0])||void 0},[e,null==t?void 0:t.id]),f=(0,a.useMemo)(function(){var e;return(null==n?void 0:null===(e=n.map)||void 0===e?void 0:e.type)==="panel"?null==n?void 0:n.map:void 0},[null==n?void 0:n.map]),v=(0,a.useMemo)(function(){var e;return(null==n?void 0:null===(e=n.map)||void 0===e?void 0:e.type)==="box"?(0,o._)({},{offsetBottom:48,offsetLeft:10,offsetRight:10,offsetTop:10},null==n?void 0:n.map):void 0},[null==n?void 0:n.map]),p=(0,l._)((0,a.useState)(!1),2),m=p[0],h=p[1],k=(0,a.useCallback)(function(){u(function(e){return(0,i._)((0,o._)({},e),{isVisibleMap:!1})})},[u]),b=(0,a.useCallback)(function(){return h(!0)},[]),g=(0,a.useCallback)(function(){return h(!1)},[]);return(0,a.useMemo)(function(){return{visiblePopup:m,sceneSelected:t,markerSelected:d,configMap:n,configDisplayBox:v,mapData:e,configDisplayPanel:f,onCloseMap:k,onClosePopup:g,onOpenPopup:b}},[m,t,d,n,v,e,f,k,g,b])}}}]);
//# sourceMappingURL=9295.f22e93dec7a6b11c.js.map