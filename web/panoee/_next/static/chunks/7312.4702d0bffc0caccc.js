"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7312],{82857:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(72253),o=n(91309),u=n(85893),l=n(67294),i=n(45243),a=n.n(i),c=n(5152),s=n.n(c),f=n(25617),d=n(1410);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let p=(0,l.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:o,id:u,placeholder:a,style:c,whenReady:s,zoom:f,...p},m){let[v]=(0,l.useState)({className:o,id:u,style:c}),[y,h]=(0,l.useState)(null);(0,l.useImperativeHandle)(m,()=>y?.map??null,[y]);let g=(0,l.useCallback)(r=>{if(null!==r&&null===y){let o=new i.Map(r,p);null!=n&&null!=f?o.setView(n,f):null!=e&&o.fitBounds(e,t),null!=s&&o.whenReady(s),h((0,d.Hb)(o))}},[]);(0,l.useEffect)(()=>()=>{y?.map.remove()},[y]);let _=y?l.createElement(d.UO,{value:y},r):a??null;return l.createElement("div",_extends({},v,{ref:g}),_)});var m=n(32880),v=n(81802),y=n(27999);let h=(0,m.Lf)(function({url:e,...t},n){let r=new i.TileLayer(e,(0,v.q)(t,n));return(0,y.O)(r,n)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)});var g=n(97616),_=n(61935),x=n(4259);function _detectIconOptions(e,t){var n,r=i.DomUtil.create("div",e,document.body),o=function(e,t){for(var n,r=/url\(['"]?([^"']*?)['"]?\)/gi,o=[],u=r.exec(e);u;)o.push(t?(n=u[1]).substr(n.lastIndexOf("/")+1):u[1]),u=r.exec(e);return o}((n=_getStyle(r,"background-image"))&&"none"!==n?n:_getStyle(r,"cursor"),t),u=_getStyleInt(r,"width"),l=_getStyleInt(r,"height"),a=_getStyleInt(r,"margin-left"),c=_getStyleInt(r,"margin-top");return r.parentNode.removeChild(r),{Url:o[0],RetinaUrl:o[1],Size:[u,l],Anchor:[-a,-c]}}function _detectDivOverlayOptions(e){var t=i.DomUtil.create("div",e,document.body),n=_getStyleInt(t,"margin-left"),r=_getStyleInt(t,"margin-top");return t.parentNode.removeChild(t),{Anchor:[n,r]}}function _getStyleInt(e,t){return parseInt(_getStyle(e,t),10)}function _getStyle(e,t){return i.DomUtil.getStyle(e,t)||i.DomUtil.getStyle(e,t.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}))}i.Icon.Default.mergeOptions({iconUrl:null,iconRetinaUrl:null,shadowUrl:null,iconSize:null,iconAnchor:null,popupAnchor:null,tooltipAnchor:null,shadowSize:null,classNamePrefix:"leaflet-default-icon-"}),i.Icon.Default.include({_needsInit:!0,_getIconUrl:function(e){var t=this.options.imagePath||i.Icon.Default.imagePath||"";return this._needsInit&&this._initializeOptions(t),t+i.Icon.prototype._getIconUrl.call(this,e)},_initializeOptions:function(e){this._setOptions("icon",_detectIconOptions,e),this._setOptions("shadow",_detectIconOptions,e),this._setOptions("popup",_detectDivOverlayOptions),this._setOptions("tooltip",_detectDivOverlayOptions),this._needsInit=!1},_setOptions:function(e,t,n){var r=this.options,o=t(r.classNamePrefix+e,n);for(var u in o)r[e+u]=r[e+u]||o[u]}});var I={roadmap:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",satellite:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",hybrid:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",terrain:"https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}"},O=s()(function(){return n.e(9888).then(n.bind(n,59888))},{loadableGenerated:{webpack:function(){return[59888]}},ssr:!1}),b=(0,l.memo)(function(e){var t=e.isMapLoaded,n=e.onFitBounds,r=e.onPanToMarker,o=e.markerSelected,u=e.setIsMapLoaded,i=(0,d.mE)().map;return(0,l.useEffect)(function(){i&&u(!0)},[i,u]),(0,l.useEffect)(function(){t&&(o?r(o):n())},[t,o,n,r]),null}),C=(0,l.forwardRef)(function(e,t){var n=e.configMap,i=e.sceneSelected,c=e.mapData,s=e.markerSelected,d=e.onChangeScene,m=(0,l.useRef)(null),v=(0,o._)((0,l.useState)(!1),2),y=v[0],C=v[1],k=(0,f.v9)(_.U9),S=(0,l.useMemo)(function(){return(0,r._)({},g.xr.radar,null==n?void 0:n.radar)},[null==n?void 0:n.radar]),L=(0,l.useMemo)(function(){return(0,r._)({},g.xr.marker,null==n?void 0:n.marker)},[null==n?void 0:n.marker]),w=(0,l.useMemo)(function(){var e=null==n?void 0:n.mapType;return e&&I[e]?I[e]:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},[null==n?void 0:n.mapType]),z=(0,l.useCallback)(function(){var e;if(m.current&&(null==c?void 0:null===(e=c.markers)||void 0===e?void 0:e.length)){var t=a().latLngBounds(c.markers.map(function(e){return[e.lat,e.lng]}));m.current.fitBounds(t,{padding:[50,50]})}},[c]),E=(0,l.useCallback)(function(e){m.current&&e&&m.current.setView([e.lat,e.lng],15)},[]),U=(0,l.useCallback)(function(e){if(null==e?void 0:e.target_scene_id){var t=k.find(function(t){return t.id===e.target_scene_id});t&&d(t)}},[k,d]);return(0,l.useImperativeHandle)(t,function(){return{onFitBounds:z,onPanToMarker:E,onInvalidateSize:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.invalidateSize()}}},[z,E]),(0,u.jsx)(x.pu,{children:(0,u.jsxs)(p,{ref:m,zoom:12,minZoom:5,center:[0,0],zoomControl:!1,scrollWheelZoom:!0,attributionControl:!1,style:{width:"100%",height:"100%"},children:[(0,u.jsx)(h,{url:w}),(0,u.jsx)(b,{isMapLoaded:y,onFitBounds:z,onPanToMarker:E,markerSelected:s,setIsMapLoaded:C}),null==c?void 0:c.markers.map(function(e){return(0,u.jsx)(O,{lat:e.lat,lng:e.lng,marker:e,configRadar:S,configMarker:L,onClick:function(){return U(e)},isTurnOnRadar:!!S.isEnabled,isActive:(null==s?void 0:s.id)===e.id,northRadar:(null==i?void 0:i.north_ath)||0},e.id)})]})})}),k=(0,l.memo)(C)},1410:function(e,t,n){n.d(t,{Hb:function(){return createLeafletContext},UO:function(){return u},mE:function(){return useLeafletContext},sj:function(){return extendContext}});var r=n(67294);function createLeafletContext(e){return Object.freeze({__version:1,map:e})}function extendContext(e,t){return Object.freeze({...e,...t})}let o=(0,r.createContext)(null),u=o.Provider;function useLeafletContext(){let e=(0,r.useContext)(o);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}},27999:function(e,t,n){n.d(t,{I:function(){return createElementHook},O:function(){return createElementObject}});var r=n(67294);function createElementObject(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function createElementHook(e,t){return null==t?function(t,n){let o=(0,r.useRef)();return o.current||(o.current=e(t,n)),o}:function(n,o){let u=(0,r.useRef)();u.current||(u.current=e(n,o));let l=(0,r.useRef)(n),{instance:i}=u.current;return(0,r.useEffect)(function(){l.current!==n&&(t(i,n,l.current),l.current=n)},[i,n,o]),u}}},32880:function(e,t,n){n.d(t,{dW:function(){return createLayerComponent},Lf:function(){return createTileLayerComponent}});var r=n(67294);n(73935);var o=n(1410),u=n(27999),l=n(81802);function createLayerHook(e){return function(t){var n;let u=(0,o.mE)(),i=e((0,l.q)(t,u),u);return!function(e,t){let n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}(u.map,t.attribution),!function(e,t){let n=(0,r.useRef)();(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}(i.current,t.eventHandlers),n=i.current,(0,r.useEffect)(function(){let e=u.layerContainer??u.map;return e.addLayer(n.instance),function(){u.layerContainer?.removeLayer(n.instance),u.map.removeLayer(n.instance)}},[u,n]),i}}function createLayerComponent(e,t){let n=(0,u.I)(e,t),l=createLayerHook(n);return(0,r.forwardRef)(function(e,t){let{instance:n,context:u}=l(e).current;return(0,r.useImperativeHandle)(t,()=>n),null==e.children?null:r.createElement(o.UO,{value:u},e.children)})}function createTileLayerComponent(e,t){let n=(0,u.I)(e,t),o=createLayerHook(n);return(0,r.forwardRef)(function(e,t){let{instance:n}=o(e).current;return(0,r.useImperativeHandle)(t,()=>n),null})}},81802:function(e,t,n){n.d(t,{q:function(){return withPane}});function withPane(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}}}]);
//# sourceMappingURL=7312.4702d0bffc0caccc.js.map