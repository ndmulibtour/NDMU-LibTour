"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1309],{19113:function(n,o,t){t.d(o,{a$:function(){return g},BT:function(){return f},_m:function(){return b},Og:function(){return h},xd:function(){return m},Eu:function(){return s},yo:function(){return v},yY:function(){return p},$d:function(){return u}});var e=t(82729),i=t(72071),l=t(94589),r=t(97616);function _templateObject(){var n=(0,e._)(["\n  0% {\n    transform: scale(0.9);\n    box-shadow: 0 0 0 0 rgba(255 255 255 / .5);\n  }\n  70% {\n    transform: scale(1);\n    box-shadow: 0 0 0 50px rgba(255 255 255 / 0);\n  }\n  100% {\n    transform: scale(0.9);\n    box-shadow: 0 0 0 0 rgba(255 255 255 / 0);\n  }\n"]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,e._)(["\n  from {\n    transform: translateY(0px);\n  }\n  to {\n    transform: translateY(",");\n  }\n"]);return _templateObject1=function(){return n},n}function _templateObject2(){var n=(0,e._)(["\n  from {\n    stroke-dashoffset: 800;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n"]);return _templateObject2=function(){return n},n}function _templateObject3(){var n=(0,e._)(["\n  0% {\n    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);\n  }\n  70%,\n  100% {\n    box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);\n  }\n"]);return _templateObject3=function(){return n},n}var a=(0,l.F4)(_templateObject()),c=(0,l.F4)(_templateObject2()),d=(0,l.F4)(_templateObject3());function styled_templateObject(){var n=(0,e._)(["\n      background-color: ",";\n      border: 2px solid #ffffff;\n      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);\n    "]);return styled_templateObject=function(){return n},n}function styled_templateObject1(){var n=(0,e._)(["\n          fill: ",";\n        "]);return styled_templateObject1=function(){return n},n}function styled_templateObject2(){var n=(0,e._)(["\n  ",";\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  ","\n  &.star span.icon {\n    margin-top: 7%;\n  }\n  &.triangle span.icon {\n    margin-top: 10%;\n  }\n  &.yinyang span.icon {\n    display: none;\n  }\n  &.diamond span.icon {\n    margin-top: -5%;\n  }\n  svg {\n    width: 100%;\n    height: 100%;\n    overflow: visible;\n    filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.4));\n  }\n  .--svg {\n    svg {\n      path {\n        stroke: #fff;\n        stroke-width: 46px;\n        ","\n      }\n    }\n  }\n  .icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    i {\n      color: "," !important;\n    }\n  }\n"]);return styled_templateObject2=function(){return n},n}function styled_templateObject3(){var n=(0,e._)(["\n  width: 100%;\n  height: auto;\n"]);return styled_templateObject3=function(){return n},n}function _templateObject4(){var n=(0,e._)(["\n  width: 100%;\n  height: 100%;\n"]);return _templateObject4=function(){return n},n}function _templateObject5(){var n=(0,e._)(["\n        fill: ",";\n      "]);return _templateObject5=function(){return n},n}function _templateObject6(){var n=(0,e._)(["\n        fill: ",";\n      "]);return _templateObject6=function(){return n},n}function _templateObject7(){var n=(0,e._)(["\n  position: relative;\n  svg {\n    ","\n  }\n  path {\n    ","\n  }\n  img {\n    position: absolute;\n    border-radius: 50%;\n    height: auto;\n    width: 70%;\n    height: auto;\n    aspect-ratio: 1/1;\n    left: 0;\n    right: 0;\n    top: 10%;\n    margin: auto;\n  }\n  #id_marker1 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker2 {\n    img {\n      top: 9%;\n      border-radius: 10%;\n    }\n  }\n  #id_marker3 {\n    img {\n      top: 9.5%;\n    }\n  }\n  #id_marker4 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker5 {\n    img {\n      top: 11%;\n    }\n  }\n  #id_marker6 {\n    img {\n      top: 8%;\n    }\n  }\n  #id_marker7 {\n    img {\n      top: 9.5%;\n    }\n  }\n  #id_marker8 {\n    img {\n      top: 12%;\n    }\n  }\n  #id_marker9 {\n    img {\n      top: 12%;\n    }\n  }\n  #id_marker10 {\n    img {\n      top: 9%;\n    }\n  }\n  #id_marker11 {\n    img {\n      top: 10.5%;\n    }\n  }\n  #id_marker12 {\n    img {\n      top: 10%;\n    }\n  }\n  #id_marker13 {\n    img {\n      top: 10%;\n    }\n  }\n  #id_marker14 {\n    img {\n      top: 11.5%;\n    }\n  }\n  #id_marker15 {\n    img {\n      top: 7.5%;\n    }\n  }\n  #id_marker16 {\n    img {\n      border-radius: 10%;\n      top: 10%;\n      width: 64%;\n    }\n  }\n"]);return _templateObject7=function(){return n},n}function _templateObject8(){var n=(0,e._)(["\n  background: ",";\n  border: 2px solid #ffffff;\n  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n  ",";\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  transition: var(--transition-smooth);\n  i {\n    font-size: 18px;\n    color: ",";\n  }\n  > div {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    svg {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  @media (hover: hover) and (pointer: fine) {\n    &:hover {\n      transform: scale(1.2);\n    }\n  }\n"]);return _templateObject8=function(){return n},n}function _templateObject9(){var n=(0,e._)(["\n      visibility: hidden;\n    "]);return _templateObject9=function(){return n},n}function _templateObject10(){var n=(0,e._)(["\n  ","\n  position: relative;\n  width: ","px;\n  height: ",";\n  .content {\n    width: 100%;\n    height: 100%;\n    opacity: ",";\n    transform: rotate(","deg);\n    ",", "," {\n      i {\n        font-size: ","px;\n      }\n    }\n    animation-iteration-count: infinite;\n    animation-duration: var(--animate-duration) !important;\n    ",";\n    &.pulse-grow {\n      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.25);\n      animation: "," 1.5s infinite;\n      animation-duration: 1500ms !important;\n    }\n    &.raise {\n      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.25);\n      animation: ","\n        500ms infinite alternate cubic-bezier(0.2, 0.65, 0.6, 1);\n      animation-duration: 2000ms !important;\n    }\n    border-radius: 50%;\n    position: relative;\n  }\n  .--title {\n    color: #fff;\n    top: -32px;\n    left: 50%;\n    // min-width: 100%;\n    font-weight: 600;\n    text-align: center;\n    position: absolute;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0.35);\n    border-radius: 4px;\n    padding: 4px 6px;\n    z-index: 20;\n    transform: translate(-50%);\n    text-shadow: 0 1px 4px #000;\n    em {\n      color: #fff;\n      text-align: center;\n      font-style: initial;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n"]);return _templateObject10=function(){return n},n}function _templateObject11(){var n=(0,e._)(["\n  width: "," !important;\n  max-width: unset !important;\n  height: "," !important;\n  transform: ","\n    rotate(","deg);\n  background-color: ",";\n  opacity: ",";\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 20;\n  transform-origin: 0 0;\n  .target {\n    width: 100%;\n    height: 100%;\n    object-fit: ",";\n  }\n  i {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n    z-index: 30;\n    color: #fff;\n    background: rgb(0 0 0 / 0.5);\n    width: 5rem;\n    height: 5rem;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.5rem;\n    transition: var(--transition-smooth);\n    transform: scale(0.5);\n    opacity: 0;\n    cursor: pointer;\n  }\n  @media (hover: hover) and (pointer: fine) {\n    &:hover {\n      i {\n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n  }\n  @media (hover: none) {\n    i {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n"]);return _templateObject11=function(){return n},n}function _templateObject12(){var n=(0,e._)(["\n  width: 50%;\n  height: 50%;\n  .calloutWrapper {\n    width: 100%;\n    height: 100%;\n    .point {\n      width: 100%;\n      height: 100%;\n      .--dot {\n        width: 100%;\n        height: 100%;\n        background: #fff;\n        border-radius: 50%;\n        animation: "," ease-out 3s forwards infinite;\n      }\n    }\n    .--main {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%)\n        rotate(","deg);\n      transform-origin: left bottom;\n    }\n    .line {\n      width: 0;\n      height: 2px;\n      background-color: #fff;\n      top: 50%;\n      transform: translateY(-50%);\n      position: absolute;\n      left: 50%;\n      transition: var(--transition-smooth);\n    }\n    .--content {\n      position: absolute;\n      left: 120px;\n      top: 50%;\n      &.--type-text {\n        height: 2px;\n        transform-origin: bottom left;\n        transform: translateY(-50%)\n          rotate(","deg);\n        .--img {\n          display: none;\n        }\n        .--line {\n          width: 0;\n          // width: 100%;\n          height: 2px;\n          margin-left: -1px;\n          background-color: #fff;\n          transition: var(--transition-smooth);\n          svg {\n            display: none;\n          }\n        }\n        .--text {\n          width: 0;\n          transition: var(--transition-smooth);\n          overflow: hidden;\n          pointer-events: none;\n          transform: translateY(calc(-100% + 20px));\n          &:after {\n            content: '';\n            width: 2px;\n            height: 0;\n            background: #fff;\n            display: block;\n            transition: var(--transition-smooth);\n            position: absolute;\n            top: 50%;\n            transform: translateY(-50%);\n          }\n        }\n        .--inner {\n          width: max-content;\n          pointer-events: auto;\n          position: relative;\n          max-width: 280px;\n          @media (max-width: 575px) {\n            max-width: 200px;\n          }\n        }\n        .--mainTitle {\n          background: var(--color-primary);\n          color: var(--color-text);\n          display: block;\n          padding: 4px 12px;\n          width: max-content;\n          // margin-bottom: 6px;\n          font-size: 0.9rem;\n          font-weight: 700;\n          line-height: 20px;\n          max-width: 100%;\n          width: 100%;\n        }\n        article {\n          color: #fff;\n          font-weight: 500;\n          text-shadow: 0 1px 4px #000;\n          max-width: 100%;\n          background: rgba(0, 0, 0, 0.35);\n          padding: 10px;\n        }\n      }\n      &.--type-img {\n        transform: translate(-20px, -50%)\n          rotate(","deg);\n        width: 120px;\n        height: 120px;\n        .--line {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: calc(100% + 10px);\n          height: calc(100% + 10px);\n          z-index: -1;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          svg {\n            display: block;\n            width: 120px;\n            height: 120px;\n            @media (max-width: 575px) {\n              circle {\n                stroke-width: 4px;\n                /* r: 60px; */\n              }\n            }\n          }\n          #path {\n            stroke-dasharray: 800;\n            opacity: 0;\n          }\n        }\n        .--text {\n          display: none;\n        }\n        .--img {\n          width: 0;\n          height: 0;\n          overflow: hidden;\n          border-radius: 50%;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          margin: auto;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          transition: var(--transition-smooth);\n        }\n        .--inner {\n          width: max-content;\n          height: max-content;\n          pointer-events: auto;\n          position: relative;\n        }\n      }\n\n      .--img {\n        .--inner {\n          img {\n            width: 110px;\n            height: 110px;\n            border-radius: 50%;\n            object-fit: cover;\n            @media (max-width: 575px) {\n              width: 110px;\n              height: 110px;\n            }\n          }\n        }\n      }\n    }\n    &.active {\n      width: 120px;\n      height: 120px;\n      .line {\n        width: 120px;\n      }\n    }\n    &.show {\n      .line {\n        width: 120px;\n      }\n      .--content {\n        &.--type-text {\n          .--line {\n            /* width: 100%; */\n            /* transition-delay: 0.8s; */\n          }\n          .--text {\n            width: 100%;\n            transition-delay: 0.8s;\n            &:after {\n              height: 100%;\n              transition-delay: 0.8s;\n            }\n          }\n        }\n        &.--type-img {\n          .--img {\n            width: 100%;\n            height: 100%;\n            opacity: 1;\n            transition-delay: 0.8s;\n            img {\n            }\n          }\n          #path {\n            opacity: 1;\n            animation: "," 2s ease-out forwards;\n            animation-delay: 0.5s;\n            transition-delay: 0.5s;\n          }\n        }\n      }\n    }\n  }\n"]);return _templateObject12=function(){return n},n}function _templateObject13(){var n=(0,e._)(["\n  .compactHotspotWrapper {\n    pointer-events: none;\n    width: 2rem;\n    height: 1.5rem;\n    .--mainMarker {\n      width: 2rem;\n      height: 2rem;\n      // border: 5px solid var(--color-primary);\n      border: 5px solid #fff;\n      border-radius: 50%;\n      box-shadow: 0px 0px 4px 4px rgba(0, 0, 0, 0.5);\n      position: relative;\n      left: 50%;\n      transform: translateX(-50%);\n      position: relative;\n      pointer-events: auto;\n      animation: pulse ease-out 3s forwards infinite;\n      @keyframes pulse {\n        0% {\n          box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);\n        }\n        70%,\n        100% {\n          box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);\n        }\n      }\n    }\n    .--revealMarkers {\n      display: flex;\n      gap: 8px;\n      pointer-events: none;\n      width: max-content;\n      height: max-content;\n      padding: 0.5rem 0;\n      left: 50%;\n      transform: translateX(-50%);\n      position: relative;\n    }\n    .--itemDetailMarker {\n      opacity: 0;\n      transform: scale(0.5);\n      transition: var(--transition-smooth);\n      flex: 0 0 auto;\n      pointer-events: auto;\n      i {\n        background: rgba(0, 0, 0, 0.5);\n        border: 1px solid rgba(255, 255, 255, 0.5);\n        color: #fff;\n        width: 2rem;\n        height: 2rem;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: var(--transition-regular);\n      }\n      &:nth-child(1) {\n        transition-delay: 0s;\n      }\n      &:nth-child(2) {\n        transition-delay: 0.05s;\n      }\n      &:nth-child(3) {\n        transition-delay: 0.1s;\n      }\n      &:nth-child(4) {\n        transition-delay: 0.15s;\n      }\n      &:nth-child(5) {\n        transition-delay: 0.2s;\n      }\n      &:nth-child(6) {\n        transition-delay: 0.25s;\n      }\n      &:nth-child(7) {\n        transition-delay: 0.3s;\n      }\n      &:nth-child(8) {\n        transition-delay: 0.35s;\n      }\n      &:nth-child(9) {\n        transition-delay: 0.4s;\n      }\n      &:nth-child(10) {\n        transition-delay: 0.45s;\n      }\n    }\n\n    &:hover {\n      .--revealMarkers {\n        pointer-events: auto;\n      }\n      .--itemDetailMarker {\n        opacity: 1;\n        transform: scale(1);\n        &:hover {\n          i {\n            //   transform: scale(1.2);\n            background: var(--color-primary);\n            border-color: transparent;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);\n          }\n        }\n      }\n    }\n  }\n"]);return _templateObject13=function(){return n},n}var u=l.ZP.div.withConfig({displayName:"styled__ShapeIconWrapper",componentId:"Panoee__sc-f0451547-0"})(styled_templateObject2(),i.b0,function(n){return!n.isRenderShape&&(0,l.iv)(styled_templateObject(),n.bgColor||"var(--color-red)")},function(n){return(0,l.iv)(styled_templateObject1(),n.bgColor||"var(--color-red)")},function(n){return n.iconColor||"#fff"}),s=l.ZP.img.withConfig({displayName:"styled__ImageIconWrapper",componentId:"Panoee__sc-f0451547-1"})(styled_templateObject3()),v=l.ZP.div.withConfig({displayName:"styled__LottieIconWrapper",componentId:"Panoee__sc-f0451547-2"})(_templateObject4()),p=l.ZP.div.withConfig({displayName:"styled__MarkerIconWrapper",componentId:"Panoee__sc-f0451547-3"})(_templateObject7(),function(n){return n.color&&(0,l.iv)(_templateObject5(),n.color)},function(n){return n.color&&(0,l.iv)(_templateObject6(),n.color)}),f=l.ZP.div.withConfig({displayName:"styled__DefaultIconWrapper",componentId:"Panoee__sc-f0451547-4"})(_templateObject8(),function(n){return n.bgColor||r.n$},i.b0,function(n){return n.iconColor||r.IM}),m=l.ZP.div.withConfig({displayName:"styled__HotspotWrapper",componentId:"Panoee__sc-f0451547-5"})(_templateObject10(),function(n){return n.isHidden&&(0,l.iv)(_templateObject9())},function(n){return("image"===n.type?24:"marker"===n.type?20:"lottie"===n.type?32:"icon-shape"===n.type?14.7:10.7)*(n.size||3)},function(n){return"image"===n.type||"marker"===n.type||"lottie"===n.type?"auto":"icon-shape"===n.type?"".concat(14.7*(n.size||3),"px"):"".concat(10.7*(n.size||3),"px")},function(n){return n.opacity},function(n){return n.rotate},u,f,function(n){return 4.7*(n.size||3)},i.b0,a,function(n){var o;return o="image"===n.type?"auto":"".concat(14*(n.size||3),"px"),(0,l.F4)(_templateObject1(),o)}),h=l.ZP.div.withConfig({displayName:"styled__HotspotMediaWrapper",componentId:"Panoee__sc-f0451547-6"})(_templateObject11(),function(n){return n.width},function(n){return n.height},function(n){return n.transform},function(n){return n.rotate||0},function(n){return n.backgroundColor},function(n){return n.opacity},function(n){return n.displayType}),g=l.ZP.div.withConfig({displayName:"styled__CalloutIconWrapper",componentId:"Panoee__sc-f0451547-7"})(_templateObject12(),d,function(n){return n.degrees||45},function(n){return-(n.degrees||45)},function(n){return-(n.degrees||45)},c),b=l.ZP.div.withConfig({displayName:"styled__HotspotCompactWrapper",componentId:"Panoee__sc-f0451547-8"})(_templateObject13())},81309:function(n,o,t){t.r(o),t.d(o,{default:function(){return no}});var e,i,l=t(91309),r=t(85893),a=t(5152),c=t.n(a),d=t(67294),u=t(25617),s=t(61935),v=t(226),p=t(86111),f=t(72253),m=t(14932),h=t(43376),g=t(82729),b=t(94589);function _templateObject(){var n=(0,g._)(["\n  width: 100%;\n  position: relative;\n  height: 100%;\n  z-index: 1;\n\n  .--pane {\n    top: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n  }\n  img {\n    user-select: none;\n  }\n  .--first-photo-container,\n  .--second-photo-container {\n    background: transparent;\n    > img {\n      width: 100%;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n  }\n  .--delimiter {\n    position: absolute;\n    height: 100%;\n    background: #fff;\n    width: 5px;\n    top: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .--delimiter-icon {\n    width: 25px;\n    height: 25px;\n    border-radius: 50%;\n    background: #fff;\n    cursor: col-resize;\n  }\n\n  .--size-fix-img {\n    width: 100%;\n    opacity: 0;\n  }\n"]);return _templateObject=function(){return n},n}var y=b.ZP.div.withConfig({displayName:"styled__BeforeAfterSliderWrapper",componentId:"Panoee__sc-d3aad712-0"})(_templateObject());function BeforeAfterSlider(n){var o,t,e=n.scenes,i=void 0===e?[]:e,a=n.firstPane,c=n.onVisible,u=n.classNames,s=n.nadirConfig,v=n.delimiterColor,p=n.withResizeFeel,f=n.mode,m=void 0===f?"slide":f,g=(0,d.useRef)(null),b=(0,d.useRef)(null),w=(0,l._)((0,d.useState)(null),2),_=w[0],x=w[1],k=(0,l._)((0,d.useState)([]),2),C=k[0],j=k[1],A=(0,l._)((0,d.useState)("default"),2),S=A[0],O=A[1],z=(0,l._)((0,d.useState)({top:0,left:0}),2),E=z[0],L=z[1],T=(0,d.useMemo)(function(){var n;return"split"===m?{width:100-(null===(n=C||[])||void 0===n?void 0:n.reduce(function(n,o){return n+(null==o?void 0:o.width)||0},0)),left:null==C?void 0:C.reduce(function(n,o){return n+o.width},0)}:{width:"100%",left:"0"}},[m,C]),M=(0,l._)((0,d.useState)(c&&window.IntersectionObserver?new IntersectionObserver(function(n){M&&c&&n.forEach(function(n){n.intersectionRatio>.95&&(M.disconnect(),c())})},{threshold:[0,.95]}):null),1)[0];(0,d.useEffect)(function(){M&&M.observe(g.current)},[M]),(0,d.useEffect)(function(){if(_){for(var n=[],o=Number(100/(i.length+1)),t=0;t<i.length;t+=1)if(0===t)n.push({width:o,left:0});else{var e=o*t;n.push({width:o,left:e})}j(n)}},[_,i]);var updateContainerWidth=function(){g.current&&x(g.current.offsetWidth)};o=function(){O("default")},(0,d.useEffect)(function(){return updateContainerWidth(),document.addEventListener("click",o),function(){document.removeEventListener("click",o)}},[o,updateContainerWidth]);var P={backgroundColor:v},F={backgroundColor:v,right:0},updateContainerPosition=function(){if(g.current){var n=g.current.getBoundingClientRect();L({top:n.top+window.pageYOffset,left:n.left+window.pageXOffset})}},onMouseDownHandler=function(n){updateContainerPosition(),O("move"),b.current||(b.current=[]),b.current.itemActive=n},onMoveHandler=function(n){if("move"===S&&_){var o,t=(n.pageX-E.left)/_*100;(null===(o=b.current)||void 0===o?void 0:o.itemActive)===C.length-1?j(function(n){return n.map(function(n,o){var e;if(o===(null===(e=b.current)||void 0===e?void 0:e.itemActive)){var i={width:t-(C.map(function(n){return n.width||0}).reduce(function(n,o){return n+o},0)-n.width),left:n.left};if(i.width>5)return i}return n})}):j(function(n){return n.map(function(o,e){var i;if(b.current&&e===(null===(i=b.current)||void 0===i?void 0:i.itemActive)){b.current.totalWidthCurrentAndNextItem=o.width+n[e+1].width,b.current.totalWidthItemsLtCurrent=n.filter(function(n,o){var t;return o<(null===(t=b.current)||void 0===t?void 0:t.itemActive)}).map(function(n){return n.width||0}).reduce(function(n,o){return n+o},0),b.current.currentWidthOld=o.width,b.current.currentWidthNew=0===b.current.itemActive?t:t-b.current.totalWidthItemsLtCurrent;var l={width:b.current.currentWidthNew,left:o.left};if(b.current.isUpdateNextItem=!1,l.width>5&&l.width<b.current.totalWidthCurrentAndNextItem-5)return b.current.isUpdateNextItem=!0,l}if(b.current&&e===b.current.itemActive+1){var r={width:o.width+b.current.currentWidthOld-b.current.currentWidthNew,left:b.current.totalWidthItemsLtCurrent+b.current.currentWidthNew};if(b.current.isUpdateNextItem)return r}return o})})}};return t=void 0===p||p,(0,d.useEffect)(function(){return t&&window.addEventListener("resize",updateContainerWidth),function(){window.removeEventListener("resize",updateContainerWidth)}},[updateContainerWidth,t]),(0,r.jsx)(y,{ref:g,className:u,onMouseMove:function(n){n.preventDefault(),onMoveHandler(n)},onTouchMove:function(n){onMoveHandler(n.touches[0])},children:C&&!!_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"--pane --first-photo-container",style:{width:"".concat(T.width,"%"),left:"".concat(T.left,"%"),zIndex:0},children:a}),i.map(function(n,o){var t,e,l;return(0,r.jsxs)("div",{className:"--pane --second-photo-container",style:{width:"".concat((null===(t=C[o])||void 0===t?void 0:t.width)||0,"%"),left:"".concat((null===(e=C[o])||void 0===e?void 0:e.left)||0,"%"),zIndex:i.length-o},children:[(0,r.jsx)("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"relative"},children:(0,r.jsx)(h.default,{urlTour:n.urlTour||"",scene:n||void 0,krpanoId:"krpanoView_".concat(o),divId:"krpanoContainer_".concat(o),styleContainer:{height:"100%",position:"absolute",left:"slide"===m?"calc(-1vw * ".concat(null===(l=C[o])||void 0===l?void 0:l.left,")"):"0",top:0,width:"slide"===m?"100vw":"100%"},nadirConfig:s})}),(0,r.jsx)("div",{className:"--delimiter",style:F,children:"slide"===m&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"--delimiter-icon",onMouseDown:function(){return onMouseDownHandler(o)},onTouchStart:function(){return onMouseDownHandler(o)},style:P})})})]},n.id)})]})})}(e=i||(i={})).MOVE="move",e.DEFAULT="default";var w=t(11010),_=t(97582),x=t(15924),k=t(97762),C=t(20745),j=t(58673),A=t(83403),S=t(62443),O=t(82502),z=t(24018),E=c()(function(){return Promise.all([t.e(5400),t.e(5928)]).then(t.bind(t,55305))},{loadableGenerated:{webpack:function(){return[55305]}}}),L=c()(function(){return t.e(5387).then(t.bind(t,15387))},{loadableGenerated:{webpack:function(){return[15387]}}}),T=(0,d.forwardRef)(function(n,o){var t=n.commentScene,e=n.onCreateCommentScene,i=n.onUpdateCommentScene,a=n.onDeleteCommentScene,c=(0,l._)((0,d.useState)(!1),2),u=c[0],s=c[1],v=(0,l._)((0,j.yG)("krpanoRef"),1)[0],p=(0,l._)((0,j.yG)("commentSceneSelected"),2),f=p[0],m=p[1],h=(0,l._)((0,j.yG)("loading"),1)[0];(0,d.useEffect)(function(){return function(){s(!1)}},[]),(0,d.useEffect)(function(){f?s(f.id===t.id):s(!1)},[f]);var g=(0,d.useCallback)(function(){m(null)},[m]),b=(0,d.useCallback)(function(n){return e(n,v)},[v,e]),y=(0,d.useCallback)(function(n){return i(n,v)},[v,i]),w=(0,d.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(n,v,o)},[v,a]);return(0,d.useImperativeHandle)(o,function(){return{onClose:function(){s(!1),g()}}}),(0,r.jsx)(S.Z,{open:u,content:(0,r.jsx)(O.default,{loading:h,children:(0,r.jsx)(E,{onClose:g,commentSceneSelected:t,onCreateCommentScene:b,onUpdateCommentScene:y,onDeleteCommentScene:w})}),placement:"bottomLeft",destroyTooltipOnHide:!0,trigger:"click",zIndex:99,children:(0,r.jsxs)(z.TM,{className:t.isResolved?"resolved":"",children:[(0,r.jsx)(L,{src:"".concat("/static","/core/comment.svg"),name:"4"}),(0,r.jsx)("span",{className:"--icon",children:(null==t?void 0:t.index)||0})]})})}),M=t(19113),P=c()(function(){return t.e(4990).then(t.bind(t,74990))},{loadableGenerated:{webpack:function(){return[74990]}}}),F=(0,d.forwardRef)(function(n,o){var t,e,i,a,c,u,s,v,p,f,m,h,g,b,y,w,_=n.hotspot,x=n.listPost,k=n.isSoundOn,C=n.onClickHotspot,j=(0,d.useRef)(null),A=(0,l._)((0,d.useState)(!1),2),S=A[0],O=A[1],z=(0,l._)((0,d.useState)(!1),2),E=z[0],L=z[1],T=(0,d.useMemo)(function(){var n,o,t,e;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-image"?null==_?void 0:null===(e=_.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.post_id:""},[_]),F=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)||"media-video"},[_]),I=(0,d.useMemo)(function(){var n,o,t,e;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-video"&&((null==_?void 0:null===(e=_.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.loop)||!1)},[_]),R=(0,d.useMemo)(function(){var n,o,t,e;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-video"&&((null==_?void 0:null===(e=_.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.autoPlay)||!1)},[_]),H=(0,d.useMemo)(function(){var n,o,t,e;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.type)==="media-video"&&(null==_?void 0:null===(e=_.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.volume)||0},[_]),N=(0,d.useMemo)(function(){var n,o;return null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.action},[_]),D=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.width)||"250px"},[_]),W=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.height)||"200px"},[_]),G=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.transform)||""},[_]),U=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.rotate)||0},[_]),Z=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.backgroundColor)||"#00000000"},[_]),B=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.opacity)||1},[_]),Y=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.displayType)||"none"},[_]),V=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:null===(o=_.config)||void 0===o?void 0:null===(n=o.media)||void 0===n?void 0:n.content)||""},[_]);(0,d.useEffect)(function(){if("media-video"===F&&j.current){if(R)try{j.current.muted=!0,j.current.autoplay=!0,O(!0)}catch(n){}else j.current.pause()}},[R,F]),(0,d.useEffect)(function(){"media-video"===F&&j.current&&(j.current.volume=k?H/100:0,j.current.muted=!k||0===H)},[H,k,F]);var J=(0,d.useCallback)(function(){return L(!0)},[]),K=(0,d.useCallback)(function(){return L(!1)},[]),X=(0,d.useCallback)(function(){switch(F){case"media-video":if("play/pause"===N){var n,o,t;O((null===(n=j.current)||void 0===n?void 0:n.paused)||!1),(null===(o=j.current)||void 0===o?void 0:o.paused)?j.current.play():null===(t=j.current)||void 0===t||t.pause()}else C({hotspot:_});break;case"media-image":"open-post"===N?J():C({hotspot:_})}},[N,_,C,J,F]);return(0,d.useImperativeHandle)(o,function(){return{onToggleMute:function(n){j.current&&(j.current.muted=n,j.current.volume=n?0:H/100)}}},[H]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Og,{width:D,height:W,opacity:B,rotate:U,transform:G,displayType:Y,backgroundColor:Z,children:"media-video"===F?(0,r.jsxs)(r.Fragment,{children:[N&&(0,r.jsx)("i",{className:"fas fa-".concat("zoom"===N?"search-plus":"play/pause"===N?S?"pause":"play":""),onClick:X,onTouchStart:X}),(0,r.jsxs)("video",{ref:j,loop:I,autoPlay:!0,className:"target",playsInline:!0,muted:!0,preload:"metadata",children:[(null==_?void 0:null===(e=_.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.type)==="media-video"&&(null==_?void 0:null===(c=_.config)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:null===(i=a.mediaIOS)||void 0===i?void 0:i.src)&&(0,r.jsx)("source",{src:(null==_?void 0:null===(s=_.config)||void 0===s?void 0:null===(u=s.media)||void 0===u?void 0:u.type)==="media-video"?(null==_?void 0:null===(f=_.config)||void 0===f?void 0:null===(p=f.media)||void 0===p?void 0:null===(v=p.mediaIOS)||void 0===v?void 0:v.src)+"#t=0.001":"",type:'video/mp4; codecs="hvc1"'}),(0,r.jsx)("source",{src:(null==_?void 0:null===(g=_.config)||void 0===g?void 0:null===(h=g.media)||void 0===h?void 0:null===(m=h.media)||void 0===m?void 0:m.src)||"#t=0.001",type:"video/mp4"})]})]}):"media-image"===F?(0,r.jsxs)(r.Fragment,{children:[N&&(0,r.jsx)("i",{"aria-hidden":!0,className:"fas fa-".concat("zoom"===N?"search-plus":"open-post"===N?"info-circle":""),onClick:X,onTouchStart:X}),(0,r.jsx)("img",{src:null==_?void 0:null===(w=_.config)||void 0===w?void 0:null===(y=w.media)||void 0===y?void 0:null===(b=y.media)||void 0===b?void 0:b.src,className:"target",alt:""})]}):"media-text"===F?(0,r.jsx)("div",{className:"target",dangerouslySetInnerHTML:{__html:V||""},onClick:X,onTouchStart:X}):(0,r.jsx)("div",{})}),E&&T&&(0,r.jsx)(P,{idPost:T,listPost:x||[],visible:E,onCancel:K})]})}),I=t(79180),R=t(97616),useInternalFunction=function(n){var o=n.scene,t=n.krpanoId,e=window,i=(0,l._)((0,j.FN)("zoom"),2)[1],r=(0,l._)((0,j.EB)("hlookat"),2)[1],a=(0,l._)((0,j.Oj)("vlookat"),2)[1],c=(0,d.useMemo)(function(){return(((null==o?void 0:o.mode)==="staging"?null==o?void 0:o.staging:(null==o?void 0:o.mode)==="day2dust"?null==o?void 0:o.day2dust:[])||[]).map(function(n){var o,t,e,i;return(0,m._)((0,f._)({},n),{xml:(null==n?void 0:null===(o=n.media)||void 0===o?void 0:o.krpano_xml)||"",urlTour:(null==n?void 0:null===(t=n.media)||void 0===t?void 0:t.src_preview)||(null==n?void 0:null===(e=n.media)||void 0===e?void 0:e.src_thumb)||(null==n?void 0:null===(i=n.media)||void 0===i?void 0:i.src)})})},[o]),u=(0,d.useCallback)(function(){e[t].call("mod(cur_hlookat,".concat(e[t].get("view.hlookat"),",360)")),e[t].call("mod(cur_Vlookat,".concat(e[t].get("view.vlookat"),",360)")),r(+e[t].get("cur_hlookat")),a(+e[t].get("cur_Vlookat")),e[t].call("update_hotspot_visiblity()")},[e,t,r,a]),s=(0,d.useCallback)(function(){var n=+e[t].get("view.fov");i(n),e[t].call("update_hotspot_visiblity_zoom(".concat(n,")"))},[e,t,i]),v=(0,d.useCallback)(function(n){var l,c,d,u,s,v,p,f,m,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"drag";(null==o?void 0:o.media.subType)!=="flat"&&e[t].set("view.limitview","range"),r(null!==(p=null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(l=c.default_view)||void 0===l?void 0:l.x)&&void 0!==p?p:e[t].get("view.hlookat")),a(null!==(f=null==o?void 0:null===(u=o.config)||void 0===u?void 0:null===(d=u.default_view)||void 0===d?void 0:d.y)&&void 0!==f?f:e[t].get("view.vlookat")),i(null!==(m=null==o?void 0:null===(v=o.config)||void 0===v?void 0:null===(s=v.default_view)||void 0===s?void 0:s.zoom_lv)&&void 0!==m?m:e[t].get("view.fov")),e[t].set("showerrors",!1),e[t].set("logkey",!1),e[t].set("debugmode",!1),n?e[t].call("followmouse_disable()"):e[t].call("followmouse_enable()"),h&&(e[t].set("control.mode",h),e[t].set("control.touchtype","drag"===h?"drag2d":h))},[o,e,t,i,r,a]),p=(0,d.useCallback)(function(){Object.entries(R.$i).forEach(function(n){var i=(0,l._)(n,2),r=i[0];Object.entries(i[1]).forEach(function(n){var i=(0,l._)(n,2),a=i[0],c=i[1],d=o&&(null==o?void 0:o.configPlugin)&&(null==o?void 0:o.configPlugin[r])&&(null==o?void 0:o.configPlugin[r][a])?null==o?void 0:o.configPlugin[r][a]:c;e[t].set("plugin[".concat(r,"].").concat(a),d)})})},[e,t,o]),h=(0,d.useCallback)(function(){var n,t,e,i,l,r,a,c,d,u,s,v,p,f,m,h,g,b,y,w,_,x,k,C,j,A,S,O,z,E,L,T,M,P,F,I,H,N,D,W,G,U,Z,B,Y,V,J,K,X,q,$,Q,nn,no,nt,ne,ni,nl,nr,na,nc,nd,nu,ns,nv,np,nf,nm,nh,ng,nb,ny,nw,n_,nx,nk,nC=arguments.length>0&&void 0!==arguments[0]&&arguments[0],nj=arguments.length>1?arguments[1]:void 0,nA=(null==o?void 0:null===(n=o.config)||void 0===n?void 0:n.typeTransition)==="3d"?"OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)":null==o?void 0:null===(t=o.config)||void 0===t?void 0:t.typeTransition,nS="",nO=(null==o?void 0:null===(e=o.config)||void 0===e?void 0:e.isLittlePlanet)?170:null!==(a=null==o?void 0:null===(l=o.config)||void 0===l?void 0:null===(i=l.default_view)||void 0===i?void 0:i.zoom_lv)&&void 0!==a?a:nC?170:90;return(null==o?void 0:null===(r=o.media)||void 0===r?void 0:r.subType)!=="flat"&&(nS+="<view ",nC||(null==o?void 0:null===(c=o.config)||void 0===c?void 0:c.isLittlePlanet)?nS+="fov='".concat(!nC&&(null==o?void 0:null===(M=o.config)||void 0===M?void 0:M.isLittlePlanet)?170:nO,"' fovmin='1' fovmax='179' hlookatmin='-180' hlookatmax='180' vlookatmin='-90' vlookatmax='90' vlookat='").concat(!nC&&(null==o?void 0:null===(P=o.config)||void 0===P?void 0:P.isLittlePlanet)?90:null!==(W=null==o?void 0:null===(I=o.config)||void 0===I?void 0:null===(F=I.default_view)||void 0===F?void 0:F.y)&&void 0!==W?W:90,"' hlookat='").concat(!nC&&(null==o?void 0:null===(H=o.config)||void 0===H?void 0:H.isLittlePlanet)?-60:null!==(G=null==o?void 0:null===(D=o.config)||void 0===D?void 0:null===(N=D.default_view)||void 0===N?void 0:N.x)&&void 0!==G?G:-60,"' stereographic='true' fisheye='1.0' fovtype='VFOV' limitview='lookat' /> <display flash10='off' detail='24' />"):((null==nj?void 0:nj.mode)&&(null==nj?void 0:nj.mode)!=="normal"?nj.mode&&(nS+='architecturalonlymiddle="'.concat((null==nj?void 0:nj.architecturalonlymiddle)||!1,'" '),"architecture"===nj.mode&&(nS+='architectural="1.0" pannini="0.0" fisheye="0.0"'),"fisheye"===nj.mode&&(nS+='architectural="0.0" pannini="1.0" fisheye="0.35"'),"pannini"===nj.mode&&(nS+='architectural="0.0" pannini="1.0" fisheye="1.0"'),"stereographic"===nj.mode&&(nS+='architectural="0.0" pannini="0.0" fisheye="1.0"')):((null==o?void 0:null===(Z=o.config)||void 0===Z?void 0:null===(U=Z.default_view)||void 0===U?void 0:U.x)!==void 0&&(nS+=' hlookat="'.concat(null==o?void 0:null===(Y=o.config)||void 0===Y?void 0:null===(B=Y.default_view)||void 0===B?void 0:B.x,'"')),(null==o?void 0:null===(J=o.config)||void 0===J?void 0:null===(V=J.default_view)||void 0===V?void 0:V.y)!==void 0&&(nS+=' vlookat="'.concat(null==o?void 0:null===(X=o.config)||void 0===X?void 0:null===(K=X.default_view)||void 0===K?void 0:K.y,'"')),(null==o?void 0:null===($=o.config)||void 0===$?void 0:null===(q=$.default_view)||void 0===q?void 0:q.zoom_lv)!==void 0&&(nS+=' fov="'.concat((null==o?void 0:null===(Q=o.config)||void 0===Q?void 0:Q.typeTransition)==="3d"?nO+30:nO,'"')),nS+=' fovmin="'.concat(null!==(nv=null==o?void 0:null===(no=o.config)||void 0===no?void 0:null===(nn=no.zoom_limit)||void 0===nn?void 0:nn.min)&&void 0!==nv?nv:60,'"')+' fovmax="\n                '.concat(null!==(np=null==o?void 0:null===(ne=o.config)||void 0===ne?void 0:null===(nt=ne.zoom_limit)||void 0===nt?void 0:nt.max)&&void 0!==np?np:150,'"')+' limitview="range"'+' hlookatmin="'.concat(null!==(nf=null==o?void 0:null===(nl=o.config)||void 0===nl?void 0:null===(ni=nl.limit_view)||void 0===ni?void 0:ni.left)&&void 0!==nf?nf:-180,'"')+' hlookatmax="'.concat(null!==(nm=null==o?void 0:null===(na=o.config)||void 0===na?void 0:null===(nr=na.limit_view)||void 0===nr?void 0:nr.right)&&void 0!==nm?nm:180,'"')+' vlookatmin="'.concat(null!==(nh=null==o?void 0:null===(nd=o.config)||void 0===nd?void 0:null===(nc=nd.limit_view)||void 0===nc?void 0:nc.bottom)&&void 0!==nh?nh:90,'"')+' vlookatmax="'.concat(null!==(ng=null==o?void 0:null===(ns=o.config)||void 0===ns?void 0:null===(nu=ns.limit_view)||void 0===nu?void 0:nu.top)&&void 0!==ng?ng:-90,'"')),nS+=" />"),nS+="".concat((null==o?void 0:null===(u=o.configPlugin)||void 0===u?void 0:null===(d=u.lensflare)||void 0===d?void 0:d.enabled)&&(null==o?void 0:null===(v=o.configPlugin)||void 0===v?void 0:null===(s=v.lensflare)||void 0===s?void 0:s.ath)&&(null==o?void 0:null===(f=o.configPlugin)||void 0===f?void 0:null===(p=f.lensflare)||void 0===p?void 0:p.atv)?'<include url="%$mypath%/core/skin/lensflare.xml" /> <lensflare_settings editor="false" ath="'.concat(null!==(nb=null==o?void 0:null===(h=o.configPlugin)||void 0===h?void 0:null===(m=h.lensflare)||void 0===m?void 0:m.ath)&&void 0!==nb?nb:null===(g=R.$i.lensflare)||void 0===g?void 0:g.ath,'" atv="').concat(null!==(ny=null==o?void 0:null===(y=o.configPlugin)||void 0===y?void 0:null===(b=y.lensflare)||void 0===b?void 0:b.atv)&&void 0!==ny?ny:null===(w=R.$i.lensflare)||void 0===w?void 0:w.atv,'" sun="').concat(null!==(nw=null==o?void 0:null===(x=o.configPlugin)||void 0===x?void 0:null===(_=x.lensflare)||void 0===_?void 0:_.sun)&&void 0!==nw?nw:null===(k=R.$i.lensflare)||void 0===k?void 0:k.sun,'" glare="').concat(null!==(n_=null==o?void 0:null===(j=o.configPlugin)||void 0===j?void 0:null===(C=j.lensflare)||void 0===C?void 0:C.glare)&&void 0!==n_?n_:null===(A=R.$i.lensflare)||void 0===A?void 0:A.glare,'" r_ring="').concat(null!==(nx=null==o?void 0:null===(O=o.configPlugin)||void 0===O?void 0:null===(S=O.lensflare)||void 0===S?void 0:S.r_ring)&&void 0!==nx?nx:null===(z=R.$i.lensflare)||void 0===z?void 0:z.r_ring,'" exposure="true" exposure_bias="').concat(null!==(nk=null==o?void 0:null===(L=o.configPlugin)||void 0===L?void 0:null===(E=L.lensflare)||void 0===E?void 0:E.exposure_bias)&&void 0!==nk?nk:null===(T=R.$i.lensflare)||void 0===T?void 0:T.exposure_bias,'"/>\n                  <plugin name="pp_light" devices="html5" keep="false" url="%$mypath%/core/plugins/pp_light.js" enabled="true" exposure="0.0" lights="0.0" shadows="0.0" filterrange="60.0" masking="1.0" quality="7" order="" phase="2" />'):"")),{view:nS,transition:nA,fovDefault:nO}},[o]),g=(0,d.useCallback)(function(n,o){if(e[t]&&o){var i,l,r="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");if("sound"===n.type){var a,c,d,u,s,v,p,f,m,h,g,b,y,w,_,x="sound1click(".concat(r,", ").concat((null==n?void 0:null===(d=n.config)||void 0===d?void 0:null===(c=d.sound)||void 0===c?void 0:null===(a=c.file)||void 0===a?void 0:a.src)||(null==n?void 0:null===(s=n.config)||void 0===s?void 0:null===(u=s.sound)||void 0===u?void 0:u.url),", ").concat((null==n?void 0:null===(p=n.config)||void 0===p?void 0:null===(v=p.sound)||void 0===v?void 0:v.action)||"pause",", ").concat((null===(m=n.config)||void 0===m?void 0:null===(f=m.sound)||void 0===f?void 0:f.volume)?(n.config.sound.volume/100).toFixed(1):.4,", ").concat((null==n?void 0:null===(g=n.config)||void 0===g?void 0:null===(h=g.sound)||void 0===h?void 0:h.reach)?n.config.sound.reach.toFixed(1):240,", ").concat((null==n?void 0:null===(y=n.config)||void 0===y?void 0:null===(b=y.sound)||void 0===b?void 0:b.auto_play)||!1,", ").concat((null==n?void 0:null===(_=n.config)||void 0===_?void 0:null===(w=_.sound)||void 0===w?void 0:w.loop)||!1,")");e[t].call(x)}else"instructor"===n.type&&(e[t].call("hotspot[".concat(r,"].togglepause()")),e[t].set("hotspot['".concat(r,"'].muted"),!(null===(l=n.config)||void 0===l?void 0:null===(i=l.instructor)||void 0===i?void 0:i.volume)||!o))}},[e,t]),b=(0,d.useCallback)(function(n){var o=e[t],i="nadirlogo";o.set("hotspot['".concat(i,"'].ath"),0),o.set("hotspot['".concat(i,"'].atv"),90),o.set("hotspot['".concat(i,"'].zoom"),!1),o.set("hotspot['".concat(i,"'].rotate"),0),o.set("hotspot['".concat(i,"'].scale"),(null==n?void 0:n.scale)||1),o.set("hotspot['".concat(i,"'].rotatewithview"),"true"),o.set("hotspot['".concat(i,"'].distorted"),!0),o.set("hotspot['".concat(i,"'].url"),(null==n?void 0:n.src)||""),o.set("hotspot['".concat(i,"'].visible"),!!((null==n?void 0:n.isEnabled)&&(null==n?void 0:n.src))),(null==n?void 0:n.link)&&o.set("hotspot['".concat(i,"'].onclick"),function(){window.open(null==n?void 0:n.link,"_blank")}),(null==n?void 0:n.isEnabled)&&(null==n?void 0:n.src)&&o.call("addhotspot('".concat(i,"')"))},[e,t]),y=(0,d.useCallback)(function(){setTimeout(function(){var n,i,l,r,a,c,d,u;e[t].call("normalview(".concat((null==o?void 0:null===(i=o.config)||void 0===i?void 0:null===(n=i.default_view)||void 0===n?void 0:n.x)||0,", ").concat((null==o?void 0:null===(r=o.config)||void 0===r?void 0:null===(l=r.default_view)||void 0===l?void 0:l.y)||0,", ").concat((null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(a=c.default_view)||void 0===a?void 0:a.zoom_lv)||90,", ").concat(null==o?void 0:null===(d=o.config)||void 0===d?void 0:d.timeTransitionLittlePlanet,")")),setTimeout(function(){var n,i,l,r,a,c,d,u,s,v,p,f,m,h,g,b,y,w;e[t].set("view.fovmin",null!==(m=null==o?void 0:null===(i=o.config)||void 0===i?void 0:null===(n=i.zoom_limit)||void 0===n?void 0:n.min)&&void 0!==m?m:60),e[t].set("view.fovmax",null!==(h=null==o?void 0:null===(r=o.config)||void 0===r?void 0:null===(l=r.zoom_limit)||void 0===l?void 0:l.max)&&void 0!==h?h:150),e[t].set("view.hlookatmin",null!==(g=null==o?void 0:null===(c=o.config)||void 0===c?void 0:null===(a=c.limit_view)||void 0===a?void 0:a.left)&&void 0!==g?g:-180),e[t].set("view.hlookatmax",null!==(b=null==o?void 0:null===(u=o.config)||void 0===u?void 0:null===(d=u.limit_view)||void 0===d?void 0:d.right)&&void 0!==b?b:180),e[t].set("view.vlookatmin",null!==(y=null==o?void 0:null===(v=o.config)||void 0===v?void 0:null===(s=v.limit_view)||void 0===s?void 0:s.bottom)&&void 0!==y?y:90),e[t].set("view.vlookatmax",null!==(w=null==o?void 0:null===(f=o.config)||void 0===f?void 0:null===(p=f.limit_view)||void 0===p?void 0:p.top)&&void 0!==w?w:-90),e[t].call("tween(view.tx|view.ty|view.tz|view.ox|view.oy|view.oz|view.fisheye, calc(''+image.ox+'|'+image.oy+'|'+image.oz+'|0|0|0|0'), 0.1, default)")},1e3*((null==o?void 0:null===(u=o.config)||void 0===u?void 0:u.timeTransitionLittlePlanet)||2)+100)},200)},[e,t,o]),w=(0,d.useCallback)(function(n){var o,i,l,r,a,c,d,u,s,v,p,f,m=e[t],h="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon","-vrmode");m.set("hotspot['".concat(h,"'].name"),h),m.set("hotspot['".concat(h,"'].url"),(null==n?void 0:null===(i=n.config)||void 0===i?void 0:null===(o=i.style)||void 0===o?void 0:o.type)==="image"&&(null==n?void 0:null===(a=n.config)||void 0===a?void 0:null===(r=a.style)||void 0===r?void 0:null===(l=r.image)||void 0===l?void 0:l.src)?null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(d=u.style)||void 0===d?void 0:null===(c=d.image)||void 0===c?void 0:c.src:"point"===n.type?"".concat("/static","/static/point.png"):"image"===n.type?"".concat("/static","/static/image.png"):"sound"===n.type?"".concat("/static","/static/sound.png"):"".concat("/static","/static/video.png")),m.set("hotspot['".concat(h,"'].renderer"),"webgl"),m.set("hotspot['".concat(h,"'].width"),"32"),m.set("hotspot['".concat(h,"'].height"),"32"),m.set("hotspot['".concat(h,"'].imagewidth"),"24"),m.set("hotspot['".concat(h,"'].imageheight"),"24"),m.set("hotspot['".concat(h,"'].depth"),"1000"),m.set("hotspot['".concat(h,"'].scale"),1),m.set("hotspot['".concat(h,"'].ath"),+n.ath),m.set("hotspot['".concat(h,"'].atv"),+n.atv),m.set("hotspot['".concat(h,"'].onover"),"tween(scale,1.5,easeOutExpo,0.2);"),m.set("hotspot['".concat(h,"'].onout"),"tween(scale,1,easeOutExpo,0.2);"),m.set("hotspot['".concat(h,"'].visible"),null!==(s=m.get("webvr.isenabled"))&&void 0!==s&&s),m.set("hotspot['".concat(h,"'].enabled"),null!==(v=m.get("webvr.isenabled"))&&void 0!==v&&v),m.set("hotspot['".concat(h,"'].align"),"center"),m.set("hotspot['".concat(h,"'].zoom"),!0);var g="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon","-title-vrmode");return m.set("hotspot['".concat(g,"'].type"),"text"),m.set("hotspot['".concat(g,"'].scale"),"0.1"),m.set("hotspot['".concat(g,"'].zoom"),!0),m.set("hotspot['".concat(g,"'].align"),"center"),m.set("hotspot['".concat(g,"'].css"),"font-size:12px;color:#ffffff"),m.set("hotspot['".concat(g,"'].html"),n.title),m.set("hotspot['".concat(g,"'].bg"),!0),m.set("hotspot['".concat(g,"'].bgcolor"),"#000000"),m.set("hotspot['".concat(g,"'].bgalpha"),"0.5"),m.set("hotspot['".concat(g,"'].ath"),n.ath),m.set("hotspot['".concat(g,"'].atv"),n.atv-3),m.set("hotspot['".concat(g,"'].visible"),null!==(p=m.get("webvr.isenabled"))&&void 0!==p&&p),m.set("hotspot['".concat(g,"'].enabled"),null!==(f=m.get("webvr.isenabled"))&&void 0!==f&&f),m.set("hotspot['".concat(g,"'].depth"),"100.0"),{krpano:m,name:h,nameTitle:g}},[e,t]),_=(0,d.useCallback)(function(n){var o,i,l,r,a,c,d,u,s,v,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=e[t],m="hotspot-".concat(n.id,"-").concat(t,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");return f.set("hotspot['".concat(m,"'].styleType"),null===(i=n.config)||void 0===i?void 0:null===(o=i.style)||void 0===o?void 0:o.type),f.set("hotspot['".concat(m,"'].name"),m),f.set("hotspot['".concat(m,"'].minZoom"),(null==n?void 0:null===(a=n.config)||void 0===a?void 0:null===(r=a.style)||void 0===r?void 0:null===(l=r.zoomRange)||void 0===l?void 0:l.min)||1),f.set("hotspot['".concat(m,"'].maxZoom"),(null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(d=u.style)||void 0===d?void 0:null===(c=d.zoomRange)||void 0===c?void 0:c.max)||179),f.set("hotspot['".concat(m,"'].zoom"),!!p),f.set("hotspot['".concat(m,"'].capture"),"true"),f.set("hotspot['".concat(m,"'].visible"),"chevron"===n.type||(s=!f.get("webvr.isenabled"),!1)||s),f.set("hotspot['".concat(m,"'].enabled"),"chevron"===n.type||(v=!f.get("webvr.isenabled"),!1)||v),f.set("hotspot['".concat(m,"'].onover"),function(){f.set("hotspot['".concat(m,"'].zorder"),4003)}),f.set("hotspot['".concat(m,"'].onout"),function(){f.set("hotspot['".concat(m,"'].zorder"),4002)}),{name:m,krpano:f,onConfigHotspotMedia:function(){f.set("hotspot['".concat(m,"'].distorted"),"true"),f.set("hotspot['".concat(m,"'].rx"),"0"),f.set("hotspot['".concat(m,"'].ry"),"0"),f.set("hotspot['".concat(m,"'].rz"),"0"),f.set("hotspot['".concat(m,"'].cursor"),"unset"),f.set("hotspot['".concat(m,"'].capture"),!1),f.set("hotspot['".concat(m,"'].usecontentsize"),"true")},onConfigHotspotPolygon:function(o){f.set("hotspot['".concat(m,"'].renderer"),"webgl");var t,e,i,l,r,a,c=n.polygon_config,d=(0,x.JF)((null==c?void 0:null===(t=c.properties)||void 0===t?void 0:t.fillColor)||(null==o?void 0:o.fillColor)||R.qi.fillColor),u=(0,x.JF)((null==c?void 0:null===(e=c.properties)||void 0===e?void 0:e.fillColorHover)||(null==o?void 0:o.fillColorHover)||R.qi.fillColorHover),s=(0,x.JF)((null==c?void 0:null===(i=c.properties)||void 0===i?void 0:i.borderColor)||(null==o?void 0:o.borderColor)||R.qi.borderColor),v=(0,x.JF)((null==c?void 0:null===(l=c.properties)||void 0===l?void 0:l.borderColorHover)||(null==o?void 0:o.borderColorHover)||R.qi.borderColorHover);if(f.set("hotspot[".concat(m,"].fillcolor"),d.color.replace("#","0x")),f.set("hotspot[".concat(m,"].bordercolor"),s.color.replace("#","0x")),f.set("hotspot[".concat(m,"].borderwidth"),(null==c?void 0:null===(r=c.properties)||void 0===r?void 0:r.borderWidth)||(null==o?void 0:o.borderWidth)||3),f.set("hotspot[".concat(m,"].fillalpha"),d.alpha),f.set("hotspot[".concat(m,"].borderalpha"),s.alpha),f.set("hotspot[".concat(m,"].tooltip"),n.title),f.set("hotspot[".concat(m,"].zorder"),1),f.set("hotspot[".concat(m,"].onhover"),function(){f.call("tween(hotspot[".concat(m,"].fillcolor, ").concat(u.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(m,"].fillalpha, ").concat(u.alpha,", 0.2);")),f.call("tween(hotspot[".concat(m,"].bordercolor, ").concat(v.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(m,"].borderalpha, ").concat(v.alpha,", 0.2);"))}),f.set("hotspot[".concat(m,"].onout"),function(){f.call("tween(hotspot[".concat(m,"].fillcolor, ").concat(d.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(m,"].fillalpha, ").concat(d.alpha,", 0.2);")),f.call("tween(hotspot[".concat(m,"].bordercolor, ").concat(s.color.replace("#","0x"),", 0.2);\n              tween(hotspot[").concat(m,"].borderalpha, ").concat(s.alpha,", 0.2);")),f.call("copy(layer[tooltip].html, );tween(layer[tooltip].alpha, 0.0, 0.25, default, set(layer[tooltip].visible,false), copy(layer[tooltip].x,mouse.stagex); copy(layer[tooltip].y,mouse.stagey); );")}),f.call("hotspot[".concat(m,"].loadstyle(poly_hotspot_text)")),null==c?void 0:null===(a=c.points)||void 0===a?void 0:a.length)for(var p=0;p<(null==c?void 0:c.points.length);p+=1){var h=null==c?void 0:c.points[p];f.set("hotspot[".concat(m,"].point[").concat(p,"].ath"),h.ath),f.set("hotspot[".concat(m,"].point[").concat(p,"].atv"),h.atv)}},onConfigHotspotInstructor:function(o){f.set("hotspot['".concat(m,"'].url"),"%$mypath%/core/plugins/videoplayer.js"),f.set("hotspot['".concat(m,"'].videourl"),null===(i=n.config)||void 0===i?void 0:null===(e=i.instructor)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.src),f.set("hotspot['".concat(m,"'].renderer"),"auto"),f.set("hotspot['".concat(m,"'].distorted"),!0),f.set("hotspot['".concat(m,"'].zoom"),!1),f.set("hotspot['".concat(m,"'].autoresume"),!0),f.set("hotspot['".concat(m,"'].muted"),!(null===(r=n.config)||void 0===r?void 0:null===(l=r.instructor)||void 0===l?void 0:l.volume)||!o),o?f.set("hotspot['".concat(m,"'].pausedonstart"),null!==(O=null===(c=n.config)||void 0===c?void 0:null===(a=c.instructor)||void 0===a?void 0:a.paused_on_start)&&void 0!==O?O:R.Cv.paused_on_start):f.set("hotspot['".concat(m,"'].pausedonstart"),!0),f.set("hotspot['".concat(m,"'].loop"),null!==(z=null===(u=n.config)||void 0===u?void 0:null===(d=u.instructor)||void 0===d?void 0:d.loop)&&void 0!==z?z:R.Cv.loop),f.set("hotspot['".concat(m,"'].directionalsound"),null!==(E=null===(v=n.config)||void 0===v?void 0:null===(s=v.instructor)||void 0===s?void 0:s.sound_360)&&void 0!==E?E:R.Cv.sound_360),f.set("hotspot['".concat(m,"'].volume"),null!==(L=null===(h=n.config)||void 0===h?void 0:null===(p=h.instructor)||void 0===p?void 0:p.volume)&&void 0!==L?L:R.Cv.volume);var t,e,i,l,r,a,c,d,u,s,v,p,h,g,b,y,w,_,k,C,j,A,S,O,z,E,L,T,M,P,F,I,H=(0,x.JF)(null!==(T=null===(b=n.config)||void 0===b?void 0:null===(g=b.instructor)||void 0===g?void 0:g.mask)&&void 0!==T?T:R.Cv.mask);f.set("hotspot[".concat(m,"].chromakey"),"".concat(H.color.replace("#","0x"),"|").concat(null!==(M=null===(w=n.config)||void 0===w?void 0:null===(y=w.instructor)||void 0===y?void 0:y.smoothing)&&void 0!==M?M:R.Cv.smoothing,"|").concat(null!==(P=null===(k=n.config)||void 0===k?void 0:null===(_=k.instructor)||void 0===_?void 0:_.threshold)&&void 0!==P?P:R.Cv.threshold));var N=null!==(F=null===(j=n.config)||void 0===j?void 0:null===(C=j.instructor)||void 0===C?void 0:C.width)&&void 0!==F?F:R.Cv.width;f.set("hotspot['".concat(m,"'].width"),N);var D=null!==(I=null===(S=n.config)||void 0===S?void 0:null===(A=S.instructor)||void 0===A?void 0:A.height)&&void 0!==I?I:R.Cv.height;f.set("hotspot['".concat(m,"'].height"),D)}}},[t,e]),k=(0,d.useCallback)(function(n){var i,l,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e[t],c="commentscene-".concat(null==n?void 0:n.id,"-").concat(t).concat(r?"-temporary":"");return a.set("hotspot['".concat(c,"'].name"),c),(null==o?void 0:o.media.subType)!=="flat"&&(a.set("hotspot['".concat(c,"'].capture"),!1),a.set("hotspot['".concat(c,"'].zoom"),!0)),a.set("hotspot['".concat(c,"'].onover"),function(){a.set("hotspot['".concat(c,"'].zorder"),4003)}),a.set("hotspot['".concat(c,"'].onout"),function(){a.set("hotspot['".concat(c,"'].zorder"),4002)}),a.set("hotspot['".concat(c,"'].ath"),+(null!==(i=null==n?void 0:n.ath)&&void 0!==i?i:0)),a.set("hotspot['".concat(c,"'].atv"),+(null!==(l=null==n?void 0:n.atv)&&void 0!==l?l:0)),a.set("hotspot['".concat(c,"'].url"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC"),a.set("hotspot['".concat(c,"'].renderer"),"css3d"),{krpano:a,name:c}},[e,o,t]);return(0,d.useMemo)(function(){return{sceneChilds:c,onRenderXmlKrpano:h,onTriggerChangeView:u,onTriggerChangeZoom:s,onTriggerSoundHotspot:g,onTriggerLoadCompleted:v,onAddHotspotNadirKrpano:b,onAddHotspotKrpanoUtils:_,onAddHotspotVRKrpanoUtils:w,onAddCommentSceneIconUtils:k,onBackNormalViewFromLittlePlanetView:y,onApplyConfigPluginKrpanoForScene:p}},[c,h,u,s,g,v,b,_,w,k,y,p])},H=void 0,N=c()(function(){return t.e(6295).then(t.bind(t,6295))},{loadableGenerated:{webpack:function(){return[6295]}}}),D=c()(function(){return t.e(308).then(t.bind(t,80308))},{loadableGenerated:{webpack:function(){return[80308]}}}),W=x.sk?void 0:window,G=(0,d.forwardRef)(function(n,o){var t,e,i,a=n.scene,c=n.listScene,v=void 0===c?[]:c,p=n.urlTour,h=n.divId,g=void 0===h?"container":h,b=n.krpanoId,y=void 0===b?"krpanoContainer":b,S=n.dollhouseXml,O=void 0===S?"":S,z=n.onClickHotspot,E=n.onChangeAutoChangeScene,L=n.isLoaded,M=n.setIsLoaded,P=n.nadirConfig,G=n.children,U=n.styleContainer,Z=void 0===U?{height:"100%"}:U,B=n.isTurnOffFollowMode,Y=void 0!==B&&B,V=n.onChangeScene,J=(0,d.useRef)(!1),K=(0,d.useRef)(!1),X=(0,d.useRef)(null),q=(0,d.useRef)(new Map([])),$=(0,d.useRef)(new Map([])),Q=(0,d.useRef)(new Map([])),nn=(0,u.v9)(s.ac),no=(0,u.v9)(s.CO),nt=(0,u.v9)(s.Yd),ne=(0,u.v9)(s.g5),ni=(0,u.v9)(s.FT),nl=(0,u.v9)(s.tE),nr=(0,u.v9)(s.lT),na=(0,u.v9)(s.p8),nc=(0,u.v9)(s.iD),nd=(0,u.v9)(s.x8),nu=(0,u.v9)(s.h6),ns=(0,l._)((0,d.useState)(),2),nv=ns[0],np=ns[1],nf=(0,l._)((0,d.useState)(!1),2),nm=nf[0],nh=nf[1],ng=(0,A.d)(),nb=ng.onCreateCommentScene,ny=ng.onUpdateCommentScene,nw=ng.onDeleteCommentScene,n_=(0,l._)((0,j.yG)("isShowDialogCreateCommentScene"),2)[1],nx=(0,l._)((0,j.yG)("commentSceneTemporary"),2)[1],nk=(0,l._)((0,j.yG)("commentSceneSelected"),2)[1],nC=useInternalFunction({scene:a,krpanoId:y}),nj=nC.sceneChilds,nA=nC.onRenderXmlKrpano,nS=nC.onTriggerChangeView,nO=nC.onTriggerChangeZoom,nz=nC.onTriggerSoundHotspot,nE=nC.onTriggerLoadCompleted,nL=nC.onAddHotspotNadirKrpano,nT=nC.onAddHotspotKrpanoUtils,nM=nC.onAddHotspotVRKrpanoUtils,nP=nC.onAddCommentSceneIconUtils,nF=nC.onApplyConfigPluginKrpanoForScene,nI=nC.onBackNormalViewFromLittlePlanetView;(0,d.useEffect)(function(){K.current=nm},[nm]);var nR=(0,d.useCallback)(function(n){if(n&&n.media&&nv){var o=nA((null==nd?void 0:nd.mode)==="little_planet",nl),t=o.transition,e=o.view,i=o.fovDefault,l=(0,x.JF)((null==nr?void 0:nr.bgColor)||R.Vb);W[y].set("dollhouse_bg_color",l.color.replace("#","0x")),no&&(null==nr?void 0:nr.isShowOnStart)&&W[y].call("hideHTML()"),nv.loadScene(p,null,n.media.krpano_xml||null,t,e,n.mode||"",nj,n.configStaging||{},i,n.media.subType,O,no&&!!(null==nr?void 0:nr.isShowOnStart))}},[p,y,nv,nj,O,no,nA,nl,null==nr?void 0:nr.bgColor,null==nd?void 0:nd.mode,null==nr?void 0:nr.isShowOnStart]),nH=(0,d.useCallback)((t=(0,w._)(function(n){var o,t,e,i,l;return(0,_.Jh)(this,function(r){return t=(o=nM(n)).krpano,e=o.name,i=o.nameTitle,l=function(){var o,i,l,r;"point"===n.type?z({hotspot:n}):"sound"===n.type?nz(n,K.current):"image"===n.type?t.call('open_galleries("'.concat(e,'", "').concat(((null===(i=n.config)||void 0===i?void 0:null===(o=i.image)||void 0===o?void 0:o.galleries)||[]).map(function(n){return n.src}).join(","),'")')):"video"===n.type&&t.call('open_video("'.concat(e,'", "').concat(null==n?void 0:null===(r=n.config)||void 0===r?void 0:null===(l=r.video)||void 0===l?void 0:l.url,'")'))},t.set("hotspot['".concat(e,"'].onclick"),l),t.set("hotspot['".concat(i,"'].onclick"),l),t.call("addhotspot('".concat(i,"')")),t.call("addhotspot('".concat(e,"')")),[2,new Promise(function(n){return n(!0)})]})}),function(n){return t.apply(this,arguments)}),[nM,z,nz]),nN=(0,d.useCallback)((e=(0,w._)(function(n){var o,t,e,i,l,c,d,u,s,p,h,g,b,y,x,j,A,S,O,L,T,M,P,I,R,H,W,G,U,Z,B,Y=arguments;function renderHotspot(){return _renderHotspot.apply(this,arguments)}function _renderHotspot(){return(_renderHotspot=(0,w._)(function(){var o,t,e,a,c,d,u;return(0,_.Jh)(this,function(s){return l.set("hotspot['".concat(i,"'].renderer"),"css3d"),e=l.get("hotspot[".concat(i,"]")),a=(0,r.jsx)("div",{id:i,className:"inline-flex ".concat((null==ni?void 0:ni.lockHotspot)&&("media"!==n.type||(null===(t=n.config)||void 0===t?void 0:null===(o=t.media)||void 0===o?void 0:o.type)!=="media-image")?"absolute-center":"")}),e.sprite.innerHTML=(0,k.Dq)(a).toString(),(c=document.getElementById(i))&&(0,C.createRoot)(c).render("media"===n.type?(0,r.jsx)(F,{ref:function(o){var t,e;o&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.media)||void 0===t?void 0:t.type)==="media-video"&&!Q.current.get(n.id)&&Q.current.set(n.id,o)},onClickHotspot:z,isSoundOn:K.current,hotspot:n,listPost:nt}):"compact"===n.type?(0,r.jsx)(D,{hotspot:n,listScene:v,languageSelected:ne,onClick:function(o){var t=o.type,e=o.config,i=(0,m._)((0,f._)({},n),{config:(0,f._)({},n.config)});t&&(i.type=t),e&&(i.config[t]=e),z({hotspot:i})}}):(0,r.jsx)(N,{onClick:function(){var o,t,e,r,a;(null===(o=n.config)||void 0===o?void 0:o.sound)!==void 0?nz(n,K.current):"point"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.point)||void 0===t?void 0:t.isTransition)&&(null===(a=n.config)||void 0===a?void 0:null===(r=a.point)||void 0===r?void 0:r.typeTransition)==="3d"?(l.call("transition_click(".concat(i,")")),setTimeout(function(){z({hotspot:n})},100)):z({hotspot:n})},isHidden:"sound"===n.type&&!(null===(u=n.config)||void 0===u?void 0:null===(d=u.sound)||void 0===d?void 0:d.action),isHideTitleGlobal:!!(null==ni?void 0:ni.hideTitle),isHidePreviewGlobal:!!(null==ni?void 0:ni.hidePreview),isHideTitleOnTopGlobal:!!(null==ni?void 0:ni.hideTitleOnTopHotspot),bgColorDefault:null==ni?void 0:ni.bgColor,iconColorDefault:null==ni?void 0:ni.iconColor,hotspot:n,listScene:v,listPost:nt,onChangePopover:function(n){return E(!n)}})),[2]})})).apply(this,arguments)}return(0,_.Jh)(this,function(r){switch(r.label){case 0:if(o=Y.length>1&&void 0!==Y[1]&&Y[1],t=Y.length>2&&void 0!==Y[2]?Y[2]:void 0,i=(e=nT(n,(null==a?void 0:a.media.subType)==="flat"||!!(null==ni?void 0:ni.keepHotspotPositionWhenZooming))).name,l=e.krpano,c=e.onConfigHotspotMedia,d=e.onConfigHotspotPolygon,u=e.onConfigHotspotInstructor,(null==a?void 0:a.media.subType)==="flat"&&l.set("hotspot['".concat(i,"'].scale"),.01),!(n.polygon&&n.polygon_config))return[3,1];return d(na),l.set("hotspot['".concat(i,"'].onclick"),function(){if(l.get("webvr.isenabled")){var o,t,e,r;"point"===n.type?z({hotspot:n}):"image"===n.type?l.call('open_galleries("'.concat(i,'", "').concat(((null===(t=n.config)||void 0===t?void 0:null===(o=t.image)||void 0===o?void 0:o.galleries)||[]).map(function(n){return n.src}),'")')):"video"===n.type&&l.call('open_video("'.concat(i,'", "').concat((null===(r=n.config)||void 0===r?void 0:null===(e=r.video)||void 0===e?void 0:e.url)||"",'")'))}else z({hotspot:n})}),[3,8];case 1:if(n.polygon)return[3,8];if(l.set("hotspot['".concat(i,"'].ath"),+n.ath),l.set("hotspot['".concat(i,"'].atv"),+n.atv),"chevron"===n.type?(l.set("hotspot['".concat(i,"'].style"),"skin_hotspotstyle"),l.set("hotspot['".concat(i,"'].onclick"),function(){var o,t,e,r;(null===(t=n.config)||void 0===t?void 0:null===(o=t.chevron)||void 0===o?void 0:o.isTransition)&&(null===(r=n.config)||void 0===r?void 0:null===(e=r.chevron)||void 0===e?void 0:e.typeTransition)==="3d"?(l.call("transition_click(".concat(i,")")),setTimeout(function(){z({hotspot:n})},100)):z({hotspot:n})})):l.set("hotspot['".concat(i,"'].distorted"),(null===(p=n.config)||void 0===p?void 0:null===(s=p.style)||void 0===s?void 0:s.distorted)||(null==ni?void 0:null===(h=ni.hotspotDistort)||void 0===h?void 0:h[n.type])||!1),"media"===n.type&&c(),!("instructor"===n.type&&(null===(y=n.config)||void 0===y?void 0:null===(b=y.instructor)||void 0===b?void 0:null===(g=b.media)||void 0===g?void 0:g.src)))return[3,2];return u(K.current),l.set("hotspot['".concat(i,"'].onclick"),function(){nz(n,K.current)}),[3,6];case 2:if("patch"!==n.type)return[3,5];if(l.set("hotspot['".concat(i,"'].width"),(null===(j=n.config)||void 0===j?void 0:null===(x=j.patch)||void 0===x?void 0:x.width)||50),l.set("hotspot['".concat(i,"'].height"),(null===(S=n.config)||void 0===S?void 0:null===(A=S.patch)||void 0===A?void 0:A.height)||50),l.set("hotspot['".concat(i,"'].distorted"),!0),l.set("hotspot['".concat(i,"'].rx"),0),l.set("hotspot['".concat(i,"'].ry"),0),l.set("hotspot['".concat(i,"'].rz"),0),l.set("hotspot['".concat(i,"'].usecontentsize"),!0),l.set("hotspot[".concat(i,"].zoom"),!0),H=(R=(null===(L=n.config)||void 0===L?void 0:null===(O=L.patch)||void 0===O?void 0:O.layers)||[]).find(function(n){return!1!==n.visible&&"none"===n.action}),W=R.find(function(n){return!1!==n.visible&&"hover"===n.action}),G=R.find(function(n){return!1!==n.visible&&"click"===n.action}),Z=(U=(null==H?void 0:H.src)||(null===(M=n.config)||void 0===M?void 0:null===(T=M.patch)||void 0===T?void 0:T.src)||"")?"".concat(U):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC",l.set("hotspot['".concat(i,"'].url"),Z),l.set("hotspot['".concat(i,"'].zorder"),3),(null==t?void 0:t.action)&&l.set("hotspot['".concat(i,"'].zorder"),1),!(W&&(null===(P=n.config)||void 0===P?void 0:P.patch)))return[3,4];return[4,nN((0,m._)((0,f._)({},n),{config:(0,m._)((0,f._)({},n.config),{patch:(0,m._)((0,f._)({},null===(B=n.config)||void 0===B?void 0:B.patch),{layers:[],src:W.src})})}),o,{action:"hover"})];case 3:r.sent(),l.set("hotspot['".concat(i,"'].onover"),function(){l.call("tween_hotspot(".concat(i,", ").concat(i,"-hover);"))}),l.set("hotspot['".concat(i,"'].onout"),function(){l.call("tween_hotspot(".concat(i,"-hover, ").concat(i,");"))}),r.label=4;case 4:return G&&(null===(I=n.config)||void 0===I?void 0:I.patch)&&l.set("hotspot['".concat(i,"'].onclick"),function(){var n=l.get("hotspot['".concat(i,"'].url"));l.call("click_hotspot(".concat(i,", ").concat(n===Z?G.src:Z,");"))}),[3,6];case 5:l.set("hotspot['".concat(i,"'].url"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUCB1jYAACAAAFAAGNu5vzAAAAAElFTkSuQmCC"),l.set("hotspot['".concat(i,"'].width"),1),l.set("hotspot['".concat(i,"'].height"),1),l.set("hotspot['".concat(i,"'].renderer"),"css3d"),r.label=6;case 6:return[4,l.set("hotspot['".concat(i,"'].onloaded"),(0,w._)(function(){return(0,_.Jh)(this,function(o){return"patch"!==n.type&&"chevron"!==n.type&&"instructor"!==n.type&&renderHotspot(),[2]})}))];case 7:r.sent(),r.label=8;case 8:return l.set("hotspot[".concat(i,"].capture"),!1),o?n.polygon||"patch"===n.type||"chevron"===n.type||"instructor"===n.type||renderHotspot():l.call("addhotspot('".concat(i,"')")),l.set("hotspot[".concat(i,"].capture"),!1),[2,new Promise(function(n){return n(!0)})]}})}),function(n){return e.apply(this,arguments)}),[a,nt,v,z,ne,ni,nz,E,nT,na]),nD=(0,d.useCallback)((i=(0,w._)(function(n,o,t){var e,i,l,a,c,d,u;return(0,_.Jh)(this,function(s){switch(s.label){case 0:if(e=n.get("hotspot[".concat(o,"]")),t.isOwnerTour&&n.set("hotspot['".concat(o,"'].onDragend"),function(){var e={ath:n.get("hotspot['".concat(o,"'].ath")),atv:n.get("hotspot['".concat(o,"'].atv"))};1e-4>Math.abs(Math.abs(t.ath)-Math.abs(e.ath))&&1e-4>Math.abs(Math.abs(t.atv)-Math.abs(e.atv))||ny((0,m._)((0,f._)({},t,e),{message:void 0,isResolved:void 0,scene_id:t.scene}))}),n.set("hotspot['".concat(o,"'].onclick"),function(){nk(t)}),!(i=document.getElementById(o))||(q.current.size&&q.current.get(t.id)&&(null===(a=q.current)||void 0===a||null===(l=a.get(null==t?void 0:t.id))||void 0===l||l.onClose()),!$.current.size||!(c=$.current.get("".concat(t.id,"_root")))))return[3,2];return[4,c.unmount()];case 1:s.sent(),s.label=2;case 2:return d=(0,r.jsx)("div",{id:o,className:"inline-flex"}),e.sprite.innerHTML=(0,k.Dq)(d).toString(),(i=document.getElementById(o))&&(u=(0,C.createRoot)(i),$.current.set("".concat(t.id,"_root"),u),u.render((0,r.jsx)(T,{ref:function(n){n&&q.current.set(t.id,n)},commentScene:t,onCreateCommentScene:nb,onUpdateCommentScene:ny,onDeleteCommentScene:nw}))),[2]}})}),function(n,o,t){return i.apply(this,arguments)}),[nk,nb,nw,ny]),nW=(0,d.useCallback)(function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=nP(n),e=t.krpano,i=t.name;n.isOwnerTour&&e.set("hotspot['".concat(i,"'].ondown"),"draghotspot()"),e.set("hotspot['".concat(i,"'].onloaded"),function(){nD(e,i,n)}),o?nD(e,i,n):e.call("addhotspot('".concat(i,"')"))},[nD,nP]),nG=(0,d.useCallback)(function(n){return W[y].call("removehotspot('commentscene-".concat(n,"-").concat(y,"')"))},[y]),nU=(0,d.useCallback)(function(n){return nW(n,!0)},[nW]),nZ=(0,d.useCallback)(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==n||n.map(function(n){return nN(n,o)})},[nN]),nB=(0,x.Ds)(function(){return nS()},150),nY=(0,x.Ds)(function(){return nO()},150),nV=(0,d.useCallback)(function(){var n=W[y].get("sceneId");n&&((null==a?void 0:a.id)!==n||no?V(n):window[y].call("reset_view()"))},[no,y,V,null==a?void 0:a.id]),nJ=(0,d.useCallback)((0,w._)(function(){var n,o,t,e,i,l,r,c,d,u,s;return(0,_.Jh)(this,function(v){switch(v.label){case 0:if(!(a&&!J.current))return[3,7];if(!(!no||!(null==nr?void 0:nr.isShowOnStart))||(nF(),no&&(null==a?void 0:null===(t=a.config)||void 0===t?void 0:t.isLittlePlanet)&&"flat"!==a.media.subType&&(null==nd?void 0:nd.mode)!=="little_planet"&&nI(),(null==a?void 0:null===(e=a.config)||void 0===e?void 0:e.isLittlePlanet)||(null==nd?void 0:nd.mode)==="little_planet"||W[y].call("tween(view.tx|view.ty|view.tz|view.ox|view.oy|view.oz|view.fisheye, calc(''+image.ox+'|'+image.oy+'|'+image.oz+'|0|0|0|0'), 0.1, default)"),nE(Y||"flat"===a.media.subType,nc.mode||"drag"),"flat"!==a.media.subType&&P&&nL(P),(null==a?void 0:a.media.subType)==="flat"&&(W[y].set("view.rx",0),W[y].set("view.ry",0),W[y].set("view.rz",0)),!(null==a?void 0:a.hotspots)))return[3,6];i=0,v.label=1;case 1:if(!(i<a.hotspots.length))return[3,6];if(!((s=a.hotspots[i]).polygon||"chevron"===s.type||"patch"===s.type||"instructor"===s.type||!W[y].get("webvr.isenabled")))return[3,3];return[4,nN(s)];case 2:v.sent(),v.label=3;case 3:if(!(!s.polygon&&("point"===s.type||"video"===s.type&&(null===(c=s.config)||void 0===c?void 0:null===(r=c.video)||void 0===r?void 0:null===(l=r.url)||void 0===l?void 0:l.endsWith(".mp4"))||"sound"===s.type&&(null===(u=s.config)||void 0===u?void 0:null===(d=u.sound)||void 0===d?void 0:d.action)||"image"===s.type)))return[3,5];return[4,nH(s)];case 4:v.sent(),v.label=5;case 5:return i++,[3,1];case 6:W[y].call("garrows_init()"),W[y].call("update_hotspot_visiblity()"),W[y].call("update_hotspot_visiblity_zoom(".concat((null==a?void 0:null===(o=a.config)||void 0===o?void 0:null===(n=o.default_view)||void 0===n?void 0:n.zoom_lv)||90,")")),J.current=!0,M(!0),v.label=7;case 7:return[2]}})}),[a,y,M,P,no,nN,Y,nH,nr,nE,nL,nc.mode,null==nd?void 0:nd.mode,nF,nI]),nK=(0,d.useCallback)(function(){var n=W[y].get("mouse.clickx"),o=W[y].get("mouse.clicky"),t=W[y].screentosphere(n,o);nx({id:(0,x.D9)(),ath:t.x,atv:t.y,message:"",scene:(null==a?void 0:a.id)||"",scene_id:(null==a?void 0:a.id)||""}),n_(!0)},[a,y,nx,n_]);return(0,d.useImperativeHandle)(o,function(){return{getContainer:function(){return X.current},viewPlanet:function(){W[y].call("cm_littleplanet_view")},viewNormal:function(){W[y].call("cm_normal_view")},viewMirrorBall:function(){W[y].call("mirror_ball_view")},viewFullscreen:function(){var n,o,t;(n=document).fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement?(o=document).exitFullscreen?o.exitFullscreen():o.msExitFullscreen?o.msExitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen&&o.mozCancelFullScreen():(t=document.body).requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():(0,x.lR)("error","Your browser does not support fullscreen mode")},viewWebvr:function(){W[y].call("webvr.enterVR()")},toggleGyro:function(){W[y].call("toggleGyroscope()")},startAutoRotate:function(n){var o=n.speed,t=n.wait_time,e=void 0===t?20:t;W[y].call("startrotation(".concat(void 0===o?10:o,", ").concat(e,")"))},stopAutoRotate:function(){W[y].call("stoprotation")},toLeft:function(){W[y].call("set(hlookat_moveforce,-0.75)")},toRight:function(){W[y].call("set(hlookat_moveforce,+0.75)")},stopToHorizontal:function(){W[y].call("set(hlookat_moveforce,0)")},toUp:function(){W[y].call("set(vlookat_moveforce,-0.75)")},toDown:function(){W[y].call("set(vlookat_moveforce,+0.75)")},stopToVertical:function(){W[y].call("set(vlookat_moveforce,0)")},removeAllChevronHotspot:function(n){n.filter(function(n){return"chevron"===n.type}).forEach(function(n){var o="hotspot-".concat(n.id,"-").concat(y,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");W[y].call("removenavigationelements(".concat(o,")"))})},triggerSound:function(){nh(!0)},destroySound:function(){W[y]&&W[y].call("destroy_sound()")},muteAllSound:function(n){var o;null==n||null===(o=n.hotspots)||void 0===o||o.forEach(function(n){var o,t,e,i,l,r,a,c,d,u,s="hotspot-".concat(n.id,"-").concat(y,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)?W[y].call("toggle_mute_sound(".concat("".concat(s),", true)")):"instructor"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.instructor)||void 0===t?void 0:t.media)?W[y].set("hotspot[".concat(s,"].muted"),!0):"media"===n.type&&(null===(l=n.config)||void 0===l?void 0:null===(i=l.media)||void 0===i?void 0:i.type)==="media-video"&&(null==n?void 0:null===(c=n.config)||void 0===c?void 0:null===(a=c.media)||void 0===a?void 0:null===(r=a.media)||void 0===r?void 0:r.src)&&(null===(u=Q.current)||void 0===u||null===(d=u.get(n.id))||void 0===d||d.onToggleMute(!0))})},unmuteAllSound:function(n){var o;null==n||null===(o=n.hotspots)||void 0===o||o.forEach(function(n){var o,t,e,i,l,r,a,c,d,u,s,v,p="hotspot-".concat(n.id,"-").concat(y,"-type").concat(n.type,"-").concat(n.polygon?"ispolygon":"unpolygon");"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)?W[y].call("toggle_mute_sound(".concat("".concat(p),", false)")):"instructor"===n.type&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.instructor)||void 0===t?void 0:t.media)?W[y].set("hotspot[".concat(p,"].muted"),!(null===(l=n.config)||void 0===l?void 0:null===(i=l.instructor)||void 0===i?void 0:i.volume)):"media"===n.type&&(null===(a=n.config)||void 0===a?void 0:null===(r=a.media)||void 0===r?void 0:r.type)==="media-video"&&(null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(d=u.media)||void 0===d?void 0:null===(c=d.media)||void 0===c?void 0:c.src)&&(null===(v=Q.current)||void 0===v||null===(s=v.get(n.id))||void 0===s||s.onToggleMute(!1))})},get:function(n){return W[y].get(n)},set:function(n,o){W[y].set(n,o)},call:function(n){W[y].call(n)},onAddCommentScene:function(n){nW(n)},onRemoveCommentScene:function(n){nG(n)},onReplaceCommentScene:function(n){nU(n)},focusOnCommentScene:function(n,o){var t="lookat(".concat(n.ath,", ").concat(n.atv,", null, null, true, true, ").concat(o(),")");W[y].call(t)},loadXml:function(n){W[y].call("load_menu_vr(".concat(n,")"))}}},[y,nW,nG,nU]),(0,d.useEffect)(function(){!nv&&y&&np((0,I.Z)(y))},[nv,y]),(0,d.useEffect)(function(){var n,o;nv&&nv.init(g,"".concat("/static","/core/tour.xml"),{mypath:"/static",watermarkEnabled:!(null==nu?void 0:nu.isOffWatermark),watermarkURL:(null==nu?void 0:nu.watermarkURL)||(0,x.HH)((null==nn?void 0:null===(n=nn.logo)||void 0===n?void 0:n.src)||"")?null==nn?void 0:null===(o=nn.logo)||void 0===o?void 0:o.src:""})},[nv,g]),(0,d.useEffect)(function(){nv&&p&&(M(!1),J.current=!1,a&&nR(a))},[null==a?void 0:a._id,nv]),(0,d.useEffect)(function(){return W[y]&&nv&&(W[y].set("events.webvr_onexitvr",nZ.bind(H,(null==a?void 0:a.hotspots.filter(function(n){return!n.polygon}))||[],!1)),W[y].set("events.reset_view_action",nZ.bind(H,null==a?void 0:a.hotspots,!1)),W[y].addEventListener("onloadcomplete",nJ),W[y].addEventListener("onviewchange",nB),W[y].addEventListener("onmousewheel",nY),W[y].addEventListener("ondoubleclick",nK)),function(){W[y]&&(W[y].removeEventListener("onloadcomplete",nJ),W[y].removeEventListener("onviewchange",nB),W[y].removeEventListener("onmousewheel",nY),W[y].removeEventListener("ondoubleclick",nK),nh(!1),q.current=new Map([]),Q.current=new Map([]))}},[nv,a._id]),(0,d.useEffect)(function(){return W[y]&&nv&&W[y].addEventListener("onnewpanovr",nV),function(){W[y]&&W[y].removeEventListener("onnewpanovr",nV)}},[nv,a,no]),(0,d.useEffect)(function(){var n;L&&nm&&(null==a||null===(n=a.hotspots)||void 0===n||n.forEach(function(n){var o,t,e,i,l,r,a,c,d,u,s,v,p;"sound"===n.type&&(null===(o=n.config)||void 0===o?void 0:o.sound)!==void 0&&(null===(e=n.config)||void 0===e?void 0:null===(t=e.sound)||void 0===t?void 0:t.auto_play)||"instructor"===n.type&&(null===(l=n.config)||void 0===l?void 0:null===(i=l.instructor)||void 0===i?void 0:i.media)&&!(null===(a=n.config)||void 0===a?void 0:null===(r=a.instructor)||void 0===r?void 0:r.paused_on_start)?nz(n,K.current):"media"===n.type&&(null===(d=n.config)||void 0===d?void 0:null===(c=d.media)||void 0===c?void 0:c.type)==="media-video"&&(null==n?void 0:null===(s=n.config)||void 0===s?void 0:null===(u=s.media)||void 0===u?void 0:u.volume)&&Q.current.get(n.id)&&(null===(p=Q.current)||void 0===p||null===(v=p.get(n.id))||void 0===v||v.onToggleMute(!1))}))},[L,nm]),(0,d.useEffect)(function(){ne&&L&&J.current&&nZ((null==a?void 0:a.hotspots)||[],!0)},[ne]),(0,r.jsx)("div",{id:g,ref:X,style:(0,f._)({},{width:"100%",height:"250px"},Z),children:G})}),U=(0,d.memo)(G),Z=c()(function(){return t.e(9884).then(t.bind(t,79884))},{loadableGenerated:{webpack:function(){return[79884]}}}),B=(0,d.memo)(function(n){var o,t,e,i,a,c=n.onChangeScene,p=n.krpanoRefState,h=n.setKrpanoRefState,g=n.setIsTourRendered,b=(0,d.useRef)(null),y=(0,u.v9)(s.U9),w=(0,u.v9)(s.oo),_=(0,u.v9)(s.Y2),x=(0,u.v9)(s.us),k=(0,u.v9)(s.hd),C=(0,u.v9)(s.JB),A=(0,l._)((0,j.yG)("krpanoRef"),2)[1],S=(0,l._)((0,j.gU)("state"),2),O=S[0],z=S[1],E=(0,v.Q)({krpanoRef:p}),L=E.dollhouseXml,T=E.onClickHotspot,M=E.onStopHotspotSound,P=E.onStartHotspotSound,F=E.onChangeAutoChangeScene,I=E.onRemoveAllChevronHotspot,H=E.onToggleModeMultipleStaging,N=(0,d.useMemo)(function(){var n,o,t;return(null==_?void 0:null===(n=_.media)||void 0===n?void 0:n.src_preview)||(null==_?void 0:null===(o=_.media)||void 0===o?void 0:o.src_thumb)||(null==_?void 0:null===(t=_.media)||void 0===t?void 0:t.src)},[null==_?void 0:_.id]),D=(0,d.useMemo)(function(){var n,o;return(null==_?void 0:_.mode)==="staging"&&(null==_?void 0:null===(n=_.staging)||void 0===n?void 0:n.length)&&(null==_?void 0:_.staging.filter(function(n){return n.media}).length)&&!(null==_?void 0:null===(o=_.configStaging)||void 0===o?void 0:o.modeDisplay)},[null==_?void 0:_.id]),W=(0,d.useMemo)(function(){var n;return(((null==_?void 0:_.mode)==="staging"&&(null==_?void 0:null===(n=_.configStaging)||void 0===n?void 0:n.modeDisplay)?null==_?void 0:_.staging:[])||[]).filter(function(n){return n.media}).map(function(n){var o,t,e;return(0,m._)((0,f._)({},n),{urlTour:(null==n?void 0:null===(o=n.media)||void 0===o?void 0:o.src_preview)||(null==n?void 0:null===(t=n.media)||void 0===t?void 0:t.src_thumb)||(null==n?void 0:null===(e=n.media)||void 0===e?void 0:e.src),config:null==_?void 0:_.config,configPlugin:null==_?void 0:_.configPlugin})})},[null==_?void 0:_.id]),G=(0,d.useCallback)(function(n){var o=y.find(function(o){return o.id===n});o&&c(o)},[y,c]);return(0,d.useEffect)(function(){k&&(M(),I(k.hotspots),H(!1))},[k]),(0,d.useEffect)(function(){x.on&&_&&P()},[null==_?void 0:_._id,x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(BeforeAfterSlider,{mode:null!==(a=null==_?void 0:null===(o=_.configStaging)||void 0===o?void 0:o.modeDisplay)&&void 0!==a?a:"",scenes:(null==O?void 0:O.isActiveModeMultipleStaging)?W:[],nadirConfig:w||void 0,firstPane:(0,r.jsx)(U,{ref:function(n){b.current||(b.current=n,h(b.current),g(!0))},nadirConfig:w||void 0,isLoaded:null==O?void 0:O.isLoaded,listScene:y,urlTour:N||"",dollhouseXml:L,setIsLoaded:function(n){z(function(o){return(0,m._)((0,f._)({},o),{isLoaded:n})}),n?A(p):n||A(null)},krpanoId:R.vd,onClickHotspot:T,divId:"krpanoContainerSnapshot",scene:_||void 0,styleContainer:{height:"100%",width:(null==_?void 0:null===(t=_.configStaging)||void 0===t?void 0:t.modeDisplay)==="split"?"100%":"100vw"},onChangeAutoChangeScene:F,isTurnOffFollowMode:!!W.length||!C.enable,onChangeScene:G})}),D&&(0,r.jsx)(Z,{scenes:(null==_?void 0:null===(e=_.staging)||void 0===e?void 0:e.map(function(n){return(0,m._)((0,f._)({},n),{config:null==_?void 0:_.config})}))||[],callKrpano:null===(i=b.current)||void 0===i?void 0:i.call})]})});function styled_templateObject(){var n=(0,g._)(["\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.04);\n  user-select: none;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .--image-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: transform 0.1s ease-in-out;\n    .--image {\n      max-width: 100%;\n      max-height: 100%;\n      object-fit: contain;\n      pointer-events: none;\n    }\n  }\n  .--navigation-button {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    background-color: rgba(50, 50, 50, 0.6);\n    color: white;\n    border: none;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    font-size: 16px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    z-index: 10;\n    transition: opacity 0.3s ease-in-out;\n    opacity: 0.7;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n    &:hover {\n      background-color: rgba(50, 50, 50, 0.8);\n      opacity: 1;\n    }\n    &:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n      background-color: rgba(50, 50, 50, 0.4);\n    }\n    &.--navigation-button-left {\n      left: 15px;\n    }\n    &.--navigation-button-right {\n      right: 15px;\n    }\n  }\n"]);return styled_templateObject=function(){return n},n}var Y=b.ZP.div.withConfig({displayName:"styled__TourRenderSceneFlat360Wrapper",componentId:"Panoee__sc-4453a878-0"})(styled_templateObject()),V=c()(function(){return t.e(9480).then(t.bind(t,29480))},{loadableGenerated:{webpack:function(){return[29480]}},ssr:!1}),J=(0,d.memo)(function(n){var o,t,e,i=n.setIsTourRendered,a=(0,d.useRef)(0),c=(0,d.useRef)(0),v=(0,d.useRef)(null),p=(0,d.useRef)(null),h=(0,u.v9)(s.Y2),g=(0,l._)((0,d.useState)({zoomLevel:1,imagesLoaded:0,currentFrame:1,minZoomLevel:1,maxZoomLevel:5,isLoading:!0,isDragging:!1,isAnimating:!1}),2),b=g[0],y=g[1],w=(0,l._)((0,d.useState)([]),2),_=w[0],x=w[1],k=(0,l._)((0,d.useState)([]),2),C=k[0],j=k[1],A=null!==(e=Number(null==h?void 0:null===(o=h.object360)||void 0===o?void 0:o.totalImages))&&void 0!==e?e:1,S=(0,d.useMemo)(function(){return Math.round(b.imagesLoaded/A*100)},[b.imagesLoaded,A]),z=(0,d.useMemo)(function(){var n;return(null==h?void 0:null===(n=h.object360)||void 0===n?void 0:n.lvl)&&b.zoomLevel>2.5&&C[b.currentFrame]},[C,null==h?void 0:null===(t=h.object360)||void 0===t?void 0:t.lvl,b.zoomLevel,b.currentFrame]),E=(0,d.useMemo)(function(){var n,o,t;return z?(null===(n=C[b.currentFrame-1])||void 0===n?void 0:n.src)||(null===(o=_[b.currentFrame-1])||void 0===o?void 0:o.src):null===(t=_[b.currentFrame-1])||void 0===t?void 0:t.src},[z,C,b.currentFrame,_]),L=(0,d.useCallback)(function(n){n.preventDefault();var o=-.01*n.deltaY,t=Math.max(b.minZoomLevel,Math.min(b.maxZoomLevel,b.zoomLevel+o));y(function(n){return(0,m._)((0,f._)({},n),{zoomLevel:t})})},[b.minZoomLevel,b.maxZoomLevel,b.zoomLevel]),T=(0,d.useCallback)(function(n){b.isLoading||b.isAnimating||(p.current&&clearInterval(p.current),y(function(n){return(0,m._)((0,f._)({},n),{isDragging:!0})}),c.current=n.clientY,a.current=n.clientX)},[b.isLoading,b.isAnimating]),M=(0,d.useCallback)(function(n){if(b.isDragging&&!b.isLoading&&!b.isAnimating){var o=n.clientX,t=n.clientY,e=o-a.current,i=t-c.current;if(a.current=o,0!==e||0!==i){var l=Math.floor(Math.abs(e)/5)||1,r=(e<0?1:-1)*1;y(function(n){for(var o=n.currentFrame+r*l;o>A;)o-=A;for(;o<1;)o+=A;return(0,m._)((0,f._)({},n),{currentFrame:o})})}}},[A,!1,b.isLoading,b.isDragging,b.isAnimating]),P=(0,d.useCallback)(function(){y(function(n){return(0,m._)((0,f._)({},n),{isDragging:!1})})},[]);return(0,d.useEffect)(function(){y(function(n){return(0,m._)((0,f._)({},n,null==h?void 0:h.object360),{isLoading:!0,imagesLoaded:0})});for(var n=[],o=[],t=0,loadImage=function(n){var o,e,l,r,a,c,d,u,s,v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=new Image,g=n.toString().padStart((null==h?void 0:null===(o=h.object360)||void 0===o?void 0:o.padLength)||5,"0");return p.src="".concat("https://assets.panoee.com","/").concat((null==h?void 0:null===(e=h.object360)||void 0===e?void 0:e.lvl)&&(null==h?void 0:null===(l=h.object360)||void 0===l?void 0:l.lvl.length)?v&&(null==h?void 0:null===(r=h.object360)||void 0===r?void 0:r.lvl.length)>1?null==h?void 0:null===(a=h.object360)||void 0===a?void 0:a.lvl[1]:null==h?void 0:null===(c=h.object360)||void 0===c?void 0:c.lvl[0]:null==h?void 0:null===(d=h.object360)||void 0===d?void 0:d.imagePath).concat(null==h?void 0:null===(u=h.object360)||void 0===u?void 0:u.imagePrefix).concat(g,".").concat(null==h?void 0:null===(s=h.object360)||void 0===s?void 0:s.imageExt),p.onload=function(){v||(t++,y(function(n){return(0,m._)((0,f._)({},n),{imagesLoaded:t})})),t===A&&(y(function(n){return(0,m._)((0,f._)({},n),{isLoading:!1})}),i(!0))},p.onerror=function(n){},p},e=1;e<=A;e++)n.push(loadImage(e)),o.push(loadImage(e,!0));return x(n),j(o),function(){n.forEach(function(n){n.onload=null,n.onerror=null}),o.forEach(function(n){n.onload=null,n.onerror=null}),x([]),j([])}},[null==h?void 0:h.id]),(0,d.useEffect)(function(){if(!b.isAnimating){var handleKeyDown=function(n){switch(n.key){case"ArrowLeft":y(function(n){return(0,m._)((0,f._)({},n),{currentFrame:(n.currentFrame-1)%A||A})});break;case"ArrowRight":y(function(n){return(0,m._)((0,f._)({},n),{currentFrame:(n.currentFrame+1)%A||A})});break;case"ArrowUp":y(function(n){return(0,m._)((0,f._)({},n),{zoomLevel:Math.min(n.maxZoomLevel,n.zoomLevel+.1)})});break;case"ArrowDown":y(function(n){return(0,m._)((0,f._)({},n),{zoomLevel:Math.max(n.minZoomLevel,n.zoomLevel-.1)})})}};return window.addEventListener("keydown",handleKeyDown),function(){window.removeEventListener("keydown",handleKeyDown)}}},[!0,b.isAnimating]),(0,d.useEffect)(function(){var n=v.current;return n&&n.addEventListener("wheel",L,{passive:!1}),function(){n&&n.removeEventListener("wheel",L)}},[L]),(0,r.jsx)(O.default,{loading:b.isLoading,description:"Loading... ".concat(S,"%"),children:(0,r.jsxs)(Y,{ref:v,onMouseDown:T,onMouseMove:M,onMouseUp:P,onMouseLeave:P,style:{cursor:b.isDragging?"grabbing":"grab"},children:[E&&(0,r.jsx)("div",{className:"--image-container",style:{transform:"scale(".concat(b.zoomLevel,")")},children:(0,r.jsx)("img",{src:E,alt:"Frame ".concat(b.currentFrame),className:"--image",draggable:!1})}),(0,r.jsx)(V,{scene:h,viewerState:b,setViewerState:y,totalFrames:A})]})})}),K=c()(function(){return t.e(6505).then(t.bind(t,26505))},{loadableGenerated:{webpack:function(){return[26505]}},ssr:!1}),X=c()(function(){return t.e(925).then(t.bind(t,50925))},{loadableGenerated:{webpack:function(){return[50925]}}}),q=c()(function(){return t.e(5569).then(t.bind(t,55569))},{loadableGenerated:{webpack:function(){return[55569]}}}),$=c()(function(){return t.e(9669).then(t.bind(t,79669))},{loadableGenerated:{webpack:function(){return[79669]}}}),Q=c()(function(){return t.e(1767).then(t.bind(t,1767))},{loadableGenerated:{webpack:function(){return[1767]}}}),nn=c()(function(){return t.e(9575).then(t.bind(t,39552))},{loadableGenerated:{webpack:function(){return[39552]}},ssr:!1}),no=(0,d.memo)(function(n){var o,t=n.onChangeScene,e=n.onNextScene,i=n.children,a=(0,u.v9)(s.Y2),c=(0,u.v9)(s.XX),f=(0,l._)((0,d.useState)(!1),2),m=f[0],h=f[1],g=(0,l._)((0,d.useState)(null),2),b=g[0],y=g[1],w=(0,v.Q)({krpanoRef:null}),_=w.isShowIconMap,x=w.isShowIconFloorplan;return(0,r.jsxs)(p.jQ,{children:[c?(0,r.jsx)(nn,{}):(null==a?void 0:null===(o=a.object360)||void 0===o?void 0:o.imagePrefix)?(0,r.jsx)(J,{setIsTourRendered:h}):(0,r.jsx)(B,{onChangeScene:t,setIsTourRendered:h,krpanoRefState:b,setKrpanoRefState:y}),m&&(0,r.jsxs)(r.Fragment,{children:[i&&i({krpanoRef:b}),b&&(0,r.jsx)(X,{krpanoRef:b}),b&&(0,r.jsx)(q,{krpanoRef:b,onNextScene:e}),(0,r.jsx)(Q,{})]}),_&&(0,r.jsx)(K,{onChangeScene:t}),x&&(0,r.jsx)($,{onChangeScene:t})]})})},86111:function(n,o,t){t.d(o,{EU:function(){return c},Md:function(){return l},Nt:function(){return a},jQ:function(){return r}});var e=t(82729),i=t(94589);function _templateObject(){var n=(0,e._)([""]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,e._)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n"]);return _templateObject1=function(){return n},n}function _templateObject2(){var n=(0,e._)(["\n  width: 100%;\n  height: 100%;\n  iframe {\n    width: 100%;\n    height: 100%;\n  }\n"]);return _templateObject2=function(){return n},n}function _templateObject3(){var n=(0,e._)(["\n  position: absolute;\n  z-index: 21;\n  bottom: 1rem;\n  right: 1rem;\n  opacity: 0;\n  transform: translateX(1rem);\n  transition: var(--transition-smooth);\n  border-radius: 8px;\n  background-color: var(--color-primary);\n  padding: 1rem;\n  width: 350px;\n  height: auto;\n  pointer-events: none;\n  article {\n    * {\n      color: var(--color-text);\n    }\n    p:last-child {\n      margin: 0;\n    }\n\n    figure {\n      width: 100% !important;\n      height: auto !important;\n      img {\n        width: 100% !important;\n        height: auto !important;\n      }\n    }\n  }\n\n  &.active {\n    opacity: 1;\n    transform: none;\n  }\n"]);return _templateObject3=function(){return n},n}var l=i.ZP.div.withConfig({displayName:"styled__TourSettingWrapper",componentId:"Panoee__sc-2d69d3ae-0"})(_templateObject()),r=i.ZP.div.withConfig({displayName:"styled__TourWrapper",componentId:"Panoee__sc-2d69d3ae-1"})(_templateObject1()),a=i.ZP.div.withConfig({displayName:"styled__MatterportContainerWrapper",componentId:"Panoee__sc-2d69d3ae-2"})(_templateObject2()),c=i.ZP.div.withConfig({displayName:"styled__HotspotCompactInfoWrapper",componentId:"Panoee__sc-2d69d3ae-3"})(_templateObject3())}}]);
//# sourceMappingURL=1309.8d9f0e9dc10be8bd.js.map